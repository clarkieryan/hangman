!function t(e,i,r){function s(o,a){if(!i[o]){if(!e[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(n)return n(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[o]={exports:{}};e[o][0].call(u.exports,function(t){var i=e[o][1][t];return s(i?i:t)},u,u.exports,t,e,i,r)}return i[o].exports}for(var n="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(t,e,i){e.exports={levels:[["phytodynamics","audit","membranule","boardlike","sedum","shaggy","number","laugh","notice","electric","unbecoming","calculator","exultant","ambiguous","uptight","eye","kind"]]}},{}],2:[function(t,e,i){!function(){var t={images:[{url:"img/hangman/V1.png",position:{x:60,y:20}},{url:"img/hangman/V2.png",position:{x:90,y:20}},{url:"img/hangman/V3.png",position:{x:0,y:0}},{url:"img/hangman/V4.png",position:{x:0,y:0}},{url:"img/hangman/V5.png",position:{x:0,y:0}},{url:"img/hangman/V6.png",position:{x:0,y:0}}]},e=function(){this._characterSprite=[],this._stage=new libs.pixi.Stage,this._sprites=[],this._addSprites()};e.prototype._addSprites=function(){for(var e=0;e<t.images.length;e++){var i=t.images[e],r=libs.utils.createSprite(i.url);r.position.x=i.position.x,r.position.y=i.position.y,r.alpha=0,this._sprites.push(r),this._stage.addChild(r)}},e.prototype.getCharacter=function(){return this._stage},e.prototype.updateCharacter=function(t){for(var e=0;t>e;e++)this._sprites[e].alpha=1},game.Character=e}()},{}],3:[function(t,e,i){!function(){"use strict";var t={playButton:{x:70,y:290}},e=function(){this._stage=new libs.pixi.Stage(null,!0),this._addImages(),this._addButtons(),libs.globalEventBus.addListener("game.loaded",this._onGameLoaded.bind(this))};e.prototype._addImages=function(){var t=libs.utils.createSprite("img/hangman/hangman-intro.png");this._stage.addChild(t)},e.prototype._addButtons=function(){var e=libs.utils.createSprite("img/hangman/play-button.png");libs.utils.addClickHandler(e,this._onPlayButtonClick.bind(this)),e.position.x=t.playButton.x,e.position.y=t.playButton.y,this._stage.addChild(e)},e.prototype._onGameLoaded=function(){libs.globalEventBus.emit("libs.updateStage",this._stage)},e.prototype._onPlayButtonClick=function(){libs.globalEventBus.emit("game.startGame")},game.EntryScreen=e}()},{}],4:[function(t,e,i){!function(){var e=(t("./character"),"ABCDEFGHIJKLMNOPQRSTUVWXYZ"),i={letters:e.split(""),defaultLevel:0,textPosition:{x:20,y:270},outputTextPosition:{x:20,y:220},totalFailedAttempts:6},r=t("../data/words.json"),s=function(){this._stage=new libs.pixi.Stage,this._letterButtons=[],this._usedLetters=[],this._background=libs.utils.createSprite("img/hangman/bg.jpg"),this._stage.addChild(this._background),this._state={level:0,failedAttempts:0},this._character=new game.Character,this._stage.addChild(this._character.getCharacter()),this._currentWord=null,this._createLetterButtons(),this._outputText=new libs.pixi.Text("ddd",{font:"35px Arial Bold",align:"left",fill:"white"}),this._outputText.position.x=i.outputTextPosition.x,this._outputText.position.y=i.outputTextPosition.y,this._stage.addChild(this._outputText),libs.globalEventBus.addListener("game.startGame",this._onStartGame.bind(this))};s.prototype._createLetterButtons=function(){for(var t={x:i.textPosition.x,y:i.textPosition.y},e=0;e<i.letters.length;e++){var r=i.letters[e],s=new libs.pixi.Text(r,{font:"35px Arial Bold",align:"left",fill:"white"});s.position.x=t.x,s.position.y=t.y,t.x+=40,(e+1)%7===0&&0!==e&&(t.x=i.textPosition.x,t.y+=40),libs.utils.addClickHandler(s,this._letterClickHandler.bind(this,r)),this._letterButtons.push(s),this._stage.addChild(s)}},s.prototype._onStartGame=function(){this._currentWord=this._getRandomword(),this._wordString=this._currentWord.replace(/[^0-9]/g,"_"),this._outputText.setText(this._wordString),libs.globalEventBus.emit("libs.updateStage",this._stage)},s.prototype._letterClickHandler=function(t){if(t=t.toLowerCase(),-1===this._usedLetters.indexOf(t)){var r=this._letterButtons[e.indexOf(t.toUpperCase())];r.alpha=.5,this._usedLetters.push(t),this._currentWord.indexOf(t)>-1?(console.log("Winning Letter"),this._updateWord(t),-1===this._wordString.indexOf("_")&&libs.globalEventBus.emit("game.end",!0)):(console.log("Non-Winning letter"),this._state.failedAttempts<i.totalFailedAttempts&&(this._state.failedAttempts+=1,this._character.updateCharacter(this._state.failedAttempts),this._state.failedAttempts===i.totalFailedAttempts&&libs.globalEventBus.emit("game.end",!1)))}},s.prototype._getRandomword=function(){var t=r.levels[this._state.level];return t[Math.floor(Math.random()*t.length)]},s.prototype._updateWord=function(t){for(var e=0;e<this._currentWord.length;e++)this._currentWord[e]===t&&(this._wordString=this._replaceAt(this._wordString,e,t));this._outputText.setText(this._wordString)},s.prototype._replaceAt=function(t,e,i){return t.substr(0,e)+i+t.substr(e+i.length)},game.HangmanMain=s}()},{"../data/words.json":1,"./character":2}],5:[function(t,e,i){!function(e){var i=t("pixi"),r=t("events");e.libs={pixi:i,globalEventBus:new r.EventEmitter,InputController:{},KeyboardInput:{},ClickInput:{},FileSystem:{},Fireworks:{},Partical:{}},e.game={hangman:{},character:{}}}(window)},{events:8,pixi:46}],6:[function(t,e,i){!function(){libs.utils={createSprite:function(t){var e=libs.pixi.Texture.fromImage(t),i=new libs.pixi.Sprite(e);return i},addClickHandler:function(t,e){t.interactive=!0,t.buttonMode=!0,t.mousedown=e.bind(this)}}}()},{}],7:[function(t,e,i){t("./libs/namespace"),t("./libs/utils"),t("./hangman/entryScreen"),t("./hangman/hangmanMain"),function(){var t=function(){this.state={},this._renderer=null,this._baseStage=null,this._initDrawing(),this._addBackground(),requestAnimationFrame(this._animLoop.bind(this)),this._entryScreen=new game.EntryScreen,this._hangmanMain=new game.HangmanMain,libs.globalEventBus.addListener("libs.updateStage",this._updateStage.bind(this)),libs.globalEventBus.emit("game.loaded")};t.prototype._initDrawing=function(){this._renderer=new libs.pixi.WebGLRenderer(310,450),document.body.appendChild(this._renderer.view),this._baseStage=new libs.pixi.Stage},t.prototype._addBackground=function(){var t=new libs.utils.createSprite("img/hangman/bg.jpg");this._baseStage.addChild(t),this._updateStage()},t.prototype._updateStage=function(t){t?this._currentStage=t:this._currentStage=this._baseStage},t.prototype._animLoop=function(){this._renderer.render(this._currentStage),requestAnimationFrame(this._animLoop.bind(this))},game.hangman.Main=t}(),document.addEventListener("DOMContentLoaded",function(t){new game.hangman.Main})},{"./hangman/entryScreen":3,"./hangman/hangmanMain":4,"./libs/namespace":5,"./libs/utils":6}],8:[function(t,e,i){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(t){return"function"==typeof t}function n(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!n(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,i,r,n,h,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(i=this._events[t],a(i))return!1;if(s(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:n=Array.prototype.slice.call(arguments,1),i.apply(this,n)}else if(o(i))for(n=Array.prototype.slice.call(arguments,1),l=i.slice(),r=l.length,h=0;r>h;h++)l[h].apply(this,n);return!0},r.prototype.addListener=function(t,e){var i;if(!s(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,s(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(i=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function i(){this.removeListener(t,i),r||(r=!0,e.apply(this,arguments))}if(!s(e))throw TypeError("listener must be a function");var r=!1;return i.listener=e,this.on(t,i),this},r.prototype.removeListener=function(t,e){var i,r,n,a;if(!s(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(i=this._events[t],n=i.length,r=-1,i===e||s(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(i)){for(a=n;a-- >0;)if(i[a]===e||i[a].listener&&i[a].listener===e){r=a;break}if(0>r)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[t],s(i))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?s(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(s(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}],9:[function(t,e,i){"use strict";function r(){this.global=new o,this.local=new o,this.target=null,this.originalEvent=null}function s(t){this.stage=t,this.mouse=new r,this.touchs={},this.tempPoint=new o,this.mouseoverEnabled=!0,this.pool=[],this.interactiveItems=[],this.interactionDOMElement=null,this.last=0}var n=t("./core/globals"),o=t("./geom/Point"),a=t("./display/Sprite"),h=t("./platform");r.prototype.getLocalPosition=function(t){var e=t.worldTransform,i=this.global,r=e[0],s=e[1],n=e[2],a=e[3],h=e[4],l=e[5],u=1/(r*h+s*-a);return new o(h*u*i.x+-s*u*i.y+(l*s-n*h)*u,r*u*i.y+-a*u*i.x+(-l*r+n*a)*u)};var l=s.prototype;l.handleEvent=function(t){switch(t.type){case"mousedown":this.onMouseDown(t);break;case"mousemove":this.onMouseMove(t);break;case"mouseup":this.onMouseUp(t);break;case"mouseout":this.onMouseOut(t);break;case"touchstart":this.onTouchStart(t);break;case"touchmove":this.onTouchMove(t);break;case"touchend":this.onTouchEnd(t)}},l.collectInteractiveSprite=function(t,e){for(var i=t.children,r=i.length-1;r>=0;r--){var s=i[r];s.interactive?(e.interactiveChildren=!0,this.interactiveItems.push(s),s.children.length>0&&this.collectInteractiveSprite(s,s)):(s.__iParent=null,s.children.length>0&&this.collectInteractiveSprite(s,e))}},l.setTarget=function(t){t?null===this.interactionDOMElement&&this.setTargetDomElement(t.view):null!==this.target&&h.window.removeEventListener("mouseup",this,!0),h.window.addEventListener("mouseup",this,!0),this.target=t},l.setTargetDomElement=function(t){null!==this.interactionDOMElement&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]="",this.interactionDOMElement.removeEventListener("mousemove",this,!0),this.interactionDOMElement.removeEventListener("mousedown",this,!0),this.interactionDOMElement.removeEventListener("mouseout",this,!0),this.interactionDOMElement.removeEventListener("touchstart",this,!0),this.interactionDOMElement.removeEventListener("touchend",this,!0),this.interactionDOMElement.removeEventListener("touchmove",this,!0));var e=h.navigator;e&&e.msPointerEnabled&&(t.style["-ms-content-zooming"]="none",t.style["-ms-touch-action"]="none"),t.addEventListener("mousemove",this,!0),t.addEventListener("mousedown",this,!0),t.addEventListener("mouseout",this,!0),t.addEventListener("touchstart",this,!0),t.addEventListener("touchend",this,!0),t.addEventListener("touchmove",this,!0),this.interactionDOMElement=t},l.update=function(){if(this.target){var t=Date.now(),e=t-this.last;if(e=30*e/1e3,!(1>e)){this.last=t;var i,r;if(this.dirty){for(this.dirty=!1,i=0,r=this.interactiveItems.length;r>i;i++)this.interactiveItems[i].interactiveChildren=!1;this.interactiveItems=[],this.stage.interactive&&this.interactiveItems.push(this.stage),this.collectInteractiveSprite(this.stage,this.stage)}for(this.interactionDOMElement.style.cursor="inherit",i=0,r=this.interactiveItems.length;r>i;i++){var s=this.interactiveItems[i];(s.mouseover||s.mouseout||s.buttonMode)&&(s.__hit=this.hitTest(s,this.mouse),this.mouse.target=s,s.__hit?(s.buttonMode&&(this.interactionDOMElement.style.cursor=s.defaultCursor),s.__isOver||(s.mouseover&&s.mouseover(this.mouse),s.__isOver=!0)):s.__isOver&&(s.mouseout&&s.mouseout(this.mouse),s.__isOver=!1))}}}},l.onMouseMove=function(t){this.mouse.originalEvent=t;var e=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=(t.clientX-e.left)*(this.target.width/e.width),this.mouse.global.y=(t.clientY-e.top)*(this.target.height/e.height);for(var i=0,r=this.interactiveItems.length;r>i;i++){var s=this.interactiveItems[i];s.mousemove&&s.mousemove(this.mouse)}},l.onMouseDown=function(t){this.mouse.originalEvent=t;for(var e=0,i=this.interactiveItems.length;i>e;e++){var r=this.interactiveItems[e];if((r.mousedown||r.click)&&(r.__mouseIsDown=!0,r.__hit=this.hitTest(r,this.mouse),r.__hit&&(r.mousedown&&r.mousedown(this.mouse),r.__isDown=!0,!r.interactiveChildren)))break}},l.onMouseOut=function(){this.interactionDOMElement.style.cursor="inherit";for(var t=0,e=this.interactiveItems.length;e>t;t++){var i=this.interactiveItems[t];i.__isOver&&(this.mouse.target=i,i.mouseout&&i.mouseout(this.mouse),i.__isOver=!1)}},l.onMouseUp=function(t){this.mouse.originalEvent=t;for(var e=!1,i=0,r=this.interactiveItems.length;r>i;i++){var s=this.interactiveItems[i];(s.mouseup||s.mouseupoutside||s.click)&&(s.__hit=this.hitTest(s,this.mouse),s.__hit&&!e?(s.mouseup&&s.mouseup(this.mouse),s.__isDown&&s.click&&s.click(this.mouse),s.interactiveChildren||(e=!0)):s.__isDown&&s.mouseupoutside&&s.mouseupoutside(this.mouse),s.__isDown=!1)}},l.hitTest=function(t,e){var i=e.global;if(t.vcount!==n.visibleCount)return!1;var r=t instanceof a,s=t.worldTransform,o=s[0],h=s[1],l=s[2],u=s[3],c=s[4],f=s[5],d=1/(o*c+h*-u),p=c*d*i.x+-h*d*i.y+(f*h-l*c)*d,v=o*d*i.y+-u*d*i.x+(-f*o+l*u)*d;if(e.target=t,t.hitArea&&t.hitArea.contains)return t.hitArea.contains(p,v)?(e.target=t,!0):!1;if(r){var g,m=t.texture.frame.width,x=t.texture.frame.height,b=-m*t.anchor.x;if(p>b&&b+m>p&&(g=-x*t.anchor.y,v>g&&g+x>v))return e.target=t,!0}for(var y=0,_=t.children.length;_>y;y++){var T=t.children[y],A=this.hitTest(T,e);if(A)return e.target=t,!0}return!1},l.onTouchMove=function(t){var e,i,r,s,n,o,a,h=this.interactionDOMElement.getBoundingClientRect(),l=t.changedTouches;for(e=0,i=l.length;i>e;e++)for(r=l[e],s=this.touchs[r.identifier],s.originalEvent=t,s.global.x=(r.clientX-h.left)*(this.target.width/h.width),s.global.y=(r.clientY-h.top)*(this.target.height/h.height),n=0,o=this.interactiveItems.length;o>n;n++)a=this.interactiveItems[e],a.touchmove&&a.touchmove(s)},l.onTouchStart=function(t){for(var e=this.interactionDOMElement.getBoundingClientRect(),i=t.changedTouches,s=0,n=i.length;n>s;s++){var o=i[s],a=this.pool.pop();a||(a=new r),a.originalEvent=t,this.touchs[o.identifier]=a,a.global.x=(o.clientX-e.left)*(this.target.width/e.width),a.global.y=(o.clientY-e.top)*(this.target.height/e.height);for(var h=0,l=this.interactiveItems.length;l>h;h++){var u=this.interactiveItems[h];if((u.touchstart||u.tap)&&(u.__hit=this.hitTest(u,a),u.__hit&&(u.touchstart&&u.touchstart(a),u.__isDown=!0,u.__touchData=a,!u.interactiveChildren)))break}}},l.onTouchEnd=function(t){for(var e=this.interactionDOMElement.getBoundingClientRect(),i=t.changedTouches,r=0,s=i.length;s>r;r++){var n=i[r],o=this.touchs[n.identifier],a=!1;o.global.x=(n.clientX-e.left)*(this.target.width/e.width),o.global.y=(n.clientY-e.top)*(this.target.height/e.height);for(var h=0,l=this.interactiveItems.length;l>h;h++){var u=this.interactiveItems[h],c=u.__touchData;u.__hit=this.hitTest(u,o),c===o&&(o.originalEvent=t,(u.touchend||u.tap)&&(u.__hit&&!a?(u.touchend&&u.touchend(o),u.__isDown&&u.tap&&u.tap(o),u.interactiveChildren||(a=!0)):u.__isDown&&u.touchendoutside&&u.touchendoutside(o),u.__isDown=!1),u.__touchData=null)}this.pool.push(o),this.touchs[n.identifier]=null}},e.exports=s},{"./core/globals":10,"./display/Sprite":14,"./geom/Point":42,"./platform":53}],10:[function(t,e,i){"use strict";e.exports={gl:null,primitiveShader:null,stripShader:null,defaultShader:null,offset:null,projection:null,texturesToUpdate:[],texturesToDestroy:[],visibleCount:0}},{}],11:[function(t,e,i){function r(){this.last=this,this.first=this,this.position=new a,this.scale=new a(1,1),this.pivot=new a(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.buttonMode=!1,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this._interactive=!1,this.defaultCursor="pointer",this.worldTransform=n.create(),this.localTransform=n.create(),this.color=[],this.dynamic=!0,this._sr=0,this._cr=1,this.filterArea=new h(0,0,1,1)}var s=t("../core/globals"),n=t("../geom/matrix").mat3,o=t("../filters/FilterBlock"),a=t("../geom/Point"),h=t("../geom/Rectangle"),l=r.prototype;l.setInteractive=function(t){this.interactive=t},Object.defineProperty(l,"interactive",{get:function(){return this._interactive},set:function(t){this._interactive=t,this.stage&&(this.stage.dirty=!0)}}),Object.defineProperty(l,"mask",{get:function(){return this._mask},set:function(t){t?this._mask?(t.start=this._mask.start,t.end=this._mask.end):(this.addFilter(t),t.renderable=!1):(this.removeFilter(this._mask),this._mask.renderable=!0),this._mask=t}}),Object.defineProperty(l,"filters",{get:function(){return this._filters},set:function(t){if(t){this._filters&&this.removeFilter(this._filters),this.addFilter(t);for(var e=[],i=0;i<t.length;i++)for(var r=t[i].passes,s=0;s<r.length;s++)e.push(r[s]);t.start.filterPasses=e}else this._filters&&this.removeFilter(this._filters);this._filters=t}}),l.addFilter=function(t){var e=new o,i=new o;t.start=e,t.end=i,e.data=t,i.data=t,e.first=e.last=this,i.first=i.last=this,e.open=!0,e.target=this;var r,s,n=e,a=e;s=this.first._iPrev,s?(r=s._iNext,n._iPrev=s,s._iNext=n):r=this,r&&(r._iPrev=a,a._iNext=r),n=i,a=i,r=null,s=null,s=this.last,r=s._iNext,r&&(r._iPrev=a,a._iNext=r),n._iPrev=s,s._iNext=n;for(var h=this,l=this.last;h;)h.last===l&&(h.last=i),h=h.parent;this.first=e,this.__renderGroup&&this.__renderGroup.addFilterBlocks(e,i)},l.removeFilter=function(t){var e=t.start,i=e._iNext,r=e._iPrev;i&&(i._iPrev=r),r&&(r._iNext=i),this.first=e._iNext;var s=t.end;i=s._iNext,r=s._iPrev,i&&(i._iPrev=r),r._iNext=i;for(var n=s._iPrev,o=this;o.last===s&&(o.last=n,o=o.parent););this.__renderGroup&&this.__renderGroup.removeFilterBlocks(e,s)},l.updateTransform=function(){this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation));var t=this.localTransform,e=this.parent.worldTransform,i=this.worldTransform;t[0]=this._cr*this.scale.x,t[1]=-this._sr*this.scale.y,t[3]=this._sr*this.scale.x,t[4]=this._cr*this.scale.y;var r=this.pivot.x,n=this.pivot.y,o=t[0],a=t[1],h=this.position.x-t[0]*r-n*t[1],l=t[3],u=t[4],c=this.position.y-t[4]*n-r*t[3],f=e[0],d=e[1],p=e[2],v=e[3],g=e[4],m=e[5];t[2]=h,t[5]=c,i[0]=f*o+d*l,i[1]=f*a+d*u,i[2]=f*h+d*c+p,i[3]=v*o+g*l,i[4]=v*a+g*u,i[5]=v*h+g*c+m,this.worldAlpha=this.alpha*this.parent.worldAlpha,this.vcount=s.visibleCount},e.exports=r},{"../core/globals":10,"../filters/FilterBlock":32,"../geom/Point":42,"../geom/Rectangle":44,"../geom/matrix":45}],12:[function(t,e,i){"use strict";function r(){s.call(this),this.children=[]}var s=t("./DisplayObject"),n=r.prototype=Object.create(s.prototype,{constructor:{value:r}});n.addChild=function(t){if(t.parent&&t.parent!==this&&t.parent.removeChild(t),t.parent=this,this.children.push(t),this.stage){var e=t;do e.interactive&&(this.stage.dirty=!0),e.stage=this.stage,e=e._iNext;while(e)}var i,r,s=t.first,n=t.last;r=this._filters||this._mask?this.last._iPrev:this.last,i=r._iNext;for(var o=this,a=r;o;)o.last===a&&(o.last=t.last),o=o.parent;i&&(i._iPrev=n,n._iNext=i),s._iPrev=r,r._iNext=s,this.__renderGroup&&(t.__renderGroup&&t.__renderGroup.removeDisplayObjectAndChildren(t),this.__renderGroup.addDisplayObjectAndChildren(t))},n.addChildAt=function(t,e){if(!(e>=0&&e<=this.children.length))throw new Error(t+" The index "+e+" supplied is out of bounds "+this.children.length);if(void 0!==t.parent&&t.parent.removeChild(t),t.parent=this,this.stage){var i=t;do i.interactive&&(this.stage.dirty=!0),i.stage=this.stage,i=i._iNext;while(i)}var r,s,n=t.first,o=t.last;if(e===this.children.length){s=this.last;for(var a=this,h=this.last;a;)a.last===h&&(a.last=t.last),a=a.parent}else s=0===e?this:this.children[e-1].last;r=s._iNext,r&&(r._iPrev=o,o._iNext=r),n._iPrev=s,s._iNext=n,this.children.splice(e,0,t),this.__renderGroup&&(t.__renderGroup&&t.__renderGroup.removeDisplayObjectAndChildren(t),this.__renderGroup.addDisplayObjectAndChildren(t))},n.swapChildren=function(t,e){if(t!==e){var i=this.children.indexOf(t),r=this.children.indexOf(e);if(0>i||0>r)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.removeChild(t),this.removeChild(e),r>i?(this.addChildAt(e,i),this.addChildAt(t,r)):(this.addChildAt(t,r),this.addChildAt(e,i))}},n.getChildAt=function(t){if(t>=0&&t<this.children.length)return this.children[t];throw new Error("Both the supplied DisplayObjects must be a child of the caller "+this)},n.removeChild=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error(t+" The supplied DisplayObject must be a child of the caller "+this);var i=t.first,r=t.last,s=r._iNext,n=i._iPrev;if(s&&(s._iPrev=n),n._iNext=s,this.last===r)for(var o=i._iPrev,a=this;a.last===r&&(a.last=o,a=a.parent););if(r._iNext=null,i._iPrev=null,this.stage){var h=t;do h.interactive&&(this.stage.dirty=!0),h.stage=null,h=h._iNext;while(h)}t.__renderGroup&&t.__renderGroup.removeDisplayObjectAndChildren(t),t.parent=void 0,this.children.splice(e,1)},n.updateTransform=function(){if(this.visible){s.prototype.updateTransform.call(this);for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform()}},e.exports=r},{"./DisplayObject":11}],13:[function(t,e,i){"use strict";function r(t){s.call(this,t[0]),this.textures=t,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this.currentFrame=0,this.playing=!1}var s=t("./Sprite"),n=r.prototype=Object.create(s.prototype,{constructor:{value:r}});Object.defineProperty(n,"totalFrames",{get:function(){return this.textures.length}}),n.stop=function(){this.playing=!1},n.play=function(){this.playing=!0},n.gotoAndStop=function(t){this.playing=!1,this.currentFrame=t;var e=this.currentFrame+.5|0;this.setTexture(this.textures[e%this.textures.length])},n.gotoAndPlay=function(t){this.currentFrame=t,this.playing=!0},n.updateTransform=function(){if(s.prototype.updateTransform.call(this),this.playing){this.currentFrame+=this.animationSpeed;var t=this.currentFrame+.5|0;this.loop||t<this.textures.length?this.setTexture(this.textures[t%this.textures.length]):t>=this.textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())}},e.exports=r},{"./Sprite":14}],14:[function(t,e,i){"use strict";function r(t){if(n.call(this),this.anchor=new o,this.texture=t,this.blendMode=s.NORMAL,this._width=0,this._height=0,t.baseTexture.hasLoaded)this.updateFrame=!0;else{var e=this;this.texture.addEventListener("update",function(){e.onTextureUpdate()})}this.renderable=!0}var s=t("./blendModes"),n=t("./DisplayObjectContainer"),o=t("../geom/Point"),a=t("../textures/Texture"),h=r.prototype=Object.create(n.prototype,{constructor:{value:r}});Object.defineProperty(h,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(h,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),h.setTexture=function(t){this.texture.baseTexture!==t.baseTexture?(this.textureChange=!0,this.texture=t,this.__renderGroup&&this.__renderGroup.updateTexture(this)):this.texture=t,this.updateFrame=!0},h.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height),this.updateFrame=!0},r.fromFrame=function(t){var e=a.cache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache'+this);return new r(e)},r.fromImage=function(t){var e=a.fromImage(t);return new r(e)},e.exports=r},{"../geom/Point":42,"../textures/Texture":71,"./DisplayObjectContainer":12,"./blendModes":16}],15:[function(t,e,i){"use strict";function r(t){a.call(this),this.worldTransform=n.create(),this.interactive=!0,this.interactionManager=new h(this),this.dirty=!0,this.__childrenAdded=[],this.__childrenRemoved=[],this.stage=this,this.stage.hitArea=new l(0,0,1e5,1e5),this.setBackgroundColor(t),this.worldVisible=!0}var s=t("../core/globals"),n=t("../geom/matrix").mat3,o=t("../utils/color").hex2rgb,a=t("./DisplayObjectContainer"),h=t("../InteractionManager"),l=t("../geom/Rectangle"),u=r.prototype=Object.create(a.prototype,{constructor:{value:r}});u.setInteractionDelegate=function(t){this.interactionManager.setTargetDomElement(t)},u.updateTransform=function(){this.worldAlpha=1,this.vcount=s.visibleCount;for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0),this.interactive&&this.interactionManager.update()},u.setBackgroundColor=function(t){this.backgroundColor=t||0,this.backgroundColorSplit=o(this.backgroundColor);var e=this.backgroundColor.toString(16);e="000000".substr(0,6-e.length)+e,this.backgroundColorString="#"+e},u.getMousePosition=function(){return this.interactionManager.mouse.global},e.exports=r},{"../InteractionManager":9,"../core/globals":10,"../geom/Rectangle":44,"../geom/matrix":45,"../utils/color":74,"./DisplayObjectContainer":12}],16:[function(t,e,i){"use strict";e.exports={NORMAL:0,SCREEN:1}},{}],17:[function(t,e,i){"use strict";function r(){var t={};this.addEventListener=this.on=function(e,i){void 0===t[e]&&(t[e]=[]),-1===t[e].indexOf(i)&&t[e].push(i)},this.dispatchEvent=this.emit=function(e){if(t[e.type]&&t[e.type].length)for(var i=0,r=t[e.type].length;r>i;i++)t[e.type][i](e)},this.removeEventListener=this.off=function(e,i){var r=t[e].indexOf(i);-1!==r&&t[e].splice(r,1)},this.removeAllEventListeners=function(e){var i=t[e];i&&(i.length=0)}}e.exports=r},{}],18:[function(t,e,i){"use strict";function r(){s.call(this),this.renderable=!0}var s=t("../display/DisplayObject"),n=r.prototype=Object.create(s.prototype,{constructor:{value:r}});n.renderCanvas=function(){},n.initWebGL=function(){},n.renderWebGL=function(){},e.exports=r},{"../display/DisplayObject":11}],19:[function(t,e,i){"use strict";function r(t,e){s.call(this,t),this.points=e;try{this.verticies=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length)}catch(i){this.verticies=new Array(4*e.length),this.uvs=new Array(4*e.length),this.colors=new Array(2*e.length),this.indices=new Array(2*e.length)}this.refresh()}var s=t("./Strip"),n=t("../display/DisplayObjectContainer"),o=r.prototype=Object.create(s.prototype,{constructor:{value:r}});o.refresh=function(){var t=this.points;if(!(t.length<1)){var e=this.uvs,i=t[0],r=this.indices,s=this.colors;this.count-=.2,e[0]=0,e[1]=1,e[2]=0,e[3]=1,s[0]=1,s[1]=1,r[0]=0,r[1]=1;for(var n,o,a,h=t.length,l=1;h>l;l++)n=t[l],o=4*l,a=l/(h-1),l%2?(e[o]=a,e[o+1]=0,e[o+2]=a,e[o+3]=1):(e[o]=a,e[o+1]=0,e[o+2]=a,e[o+3]=1),o=2*l,s[o]=1,s[o+1]=1,o=2*l,r[o]=o,r[o+1]=o+1,i=n}},o.updateTransform=function(){var t=this.points;if(!(t.length<1)){var e,i=t[0],r={x:0,y:0};this.count-=.2;var s=this.verticies;s[0]=i.x+r.x,s[1]=i.y+r.y,s[2]=i.x-r.x,s[3]=i.y-r.y;for(var o,a,h,l,u,c=t.length,f=1;c>f;f++)o=t[f],a=4*f,e=f<t.length-1?t[f+1]:o,r.y=-(e.x-i.x),r.x=e.y-i.y,h=10*(1-f/(c-1)),h>1&&(h=1),l=Math.sqrt(r.x*r.x+r.y*r.y),u=this.texture.height/2,r.x/=l,r.y/=l,r.x*=u,r.y*=u,s[a]=o.x+r.x,s[a+1]=o.y+r.y,s[a+2]=o.x-r.x,s[a+3]=o.y-r.y,i=o;n.prototype.updateTransform.call(this)}},o.setTexture=function(t){this.texture=t,this.updateFrame=!0},e.exports=r},{"../display/DisplayObjectContainer":12,"./Strip":21}],20:[function(t,e,i){"use strict";function r(t){if(n.call(this),this.spineData=r.animCache[t],!this.spineData)throw new Error("Spine data must be preloaded using SpineLoader or AssetLoader: "+t);this.skeleton=new s.Skeleton(this.spineData),this.skeleton.updateWorldTransform(),this.stateData=new s.AnimationStateData(this.spineData),this.state=new s.AnimationState(this.stateData),this.slotContainers=[];for(var e=0,i=this.skeleton.drawOrder.length;i>e;e++){var o=this.skeleton.drawOrder[e],a=o.attachment,h=new n;if(this.slotContainers.push(h),this.addChild(h),a instanceof s.RegionAttachment){var l=a.rendererObject.name,u=this.createSprite(o,a.rendererObject);o.currentSprite=u,o.currentSpriteName=l,h.addChild(u)}}}var s=t("../utils/spine"),n=t("../display/DisplayObjectContainer"),o=t("../display/Sprite"),a=t("../textures/Texture"),h=r.prototype=Object.create(n.prototype,{constructor:{value:r}});h.updateTransform=function(){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.state.update(t),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var e=this.skeleton.drawOrder,i=0,r=e.length;r>i;i++){var o=e[i],a=o.attachment,h=this.slotContainers[i];if(a instanceof s.RegionAttachment){if(a.rendererObject&&(!o.currentSpriteName||o.currentSpriteName!==a.name)){var l=a.rendererObject.name;if(void 0!==o.currentSprite&&(o.currentSprite.visible=!1),o.sprites=o.sprites||{},void 0!==o.sprites[l])o.sprites[l].visible=!0;else{var u=this.createSprite(o,a.rendererObject);h.addChild(u)}o.currentSprite=o.sprites[l],o.currentSpriteName=l}h.visible=!0;var c=o.bone;h.position.x=c.worldX+a.x*c.m00+a.y*c.m01,h.position.y=c.worldY+a.x*c.m10+a.y*c.m11,h.scale.x=c.worldScaleX,h.scale.y=c.worldScaleY,h.rotation=-(o.bone.worldRotation*Math.PI/180)}else h.visible=!1}n.prototype.updateTransform.call(this)},h.createSprite=function(t,e){var i=a.cache[e.name]?e.name:e.name+".png",r=new o(a.fromFrame(i));return r.scale=e.scale,r.rotation=e.rotation,r.anchor.x=r.anchor.y=.5,t.sprites=t.sprites||{},t.sprites[e.name]=r,r},r.animCache={},e.exports=r},{"../display/DisplayObjectContainer":12,"../display/Sprite":14,"../textures/Texture":71,"../utils/spine":76}],21:[function(t,e,i){"use strict";function r(t,e,i){n.call(this),this.texture=t,this.blendMode=s.NORMAL;try{this.uvs=new Float32Array([0,1,1,1,1,0,0,1]),this.verticies=new Float32Array([0,0,0,0,0,0,0,0,0]),this.colors=new Float32Array([1,1,1,1]),this.indices=new Uint16Array([0,1,2,3])}catch(r){this.uvs=[0,1,1,1,1,0,0,1],this.verticies=[0,0,0,0,0,0,0,0,0],this.colors=[1,1,1,1],this.indices=[0,1,2,3]}if(this.width=e,this.height=i,
t.baseTexture.hasLoaded)this.width=this.texture.frame.width,this.height=this.texture.frame.height,this.updateFrame=!0;else{var o=this;this.texture.addEventListener("update",function(){o.onTextureUpdate()})}this.renderable=!0}var s=t("../display/blendModes"),n=t("../display/DisplayObjectContainer"),o=r.prototype=Object.create(n.prototype,{constructor:{value:r}});o.setTexture=function(t){this.texture=t,this.width=t.frame.width,this.height=t.frame.height,this.updateFrame=!0},o.onTextureUpdate=function(){this.updateFrame=!0},e.exports=r},{"../display/DisplayObjectContainer":12,"../display/blendModes":16}],22:[function(t,e,i){"use strict";function r(t,e,i){n.call(this),this.texture=t,this.width=e,this.height=i,this.tileScale=new o(1,1),this.tilePosition=new o(0,0),this.renderable=!0,this.blendMode=s.NORMAL}var s=t("../display/blendModes"),n=t("../display/DisplayObjectContainer"),o=t("../geom/Point"),a=r.prototype=Object.create(n.prototype,{constructor:{value:r}});a.setTexture=function(t){this.texture=t,this.updateFrame=!0},a.onTextureUpdate=function(){this.updateFrame=!0},e.exports=r},{"../display/DisplayObjectContainer":12,"../display/blendModes":16,"../geom/Point":42}],23:[function(t,e,i){"use strict";function r(t,e){this.passes=[this],this.dirty=!0,this.padding=0,this.uniforms=e||{},this.fragmentSrc=t||[]}e.exports=r},{}],24:[function(t,e,i){"use strict";function r(){this.blurXFilter=new s,this.blurYFilter=new n,this.passes=[this.blurXFilter,this.blurYFilter]}var s=t("./BlurXFilter"),n=t("./BlurYFilter"),o=r.prototype;Object.defineProperty(o,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t}}),Object.defineProperty(o,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}}),Object.defineProperty(o,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}),e.exports=r},{"./BlurXFilter":25,"./BlurYFilter":26}],25:[function(t,e,i){"use strict";function r(){s.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;","   gl_FragColor = sum;","}"]}var s=t("./AbstractFilter"),n=r.prototype=Object.create(s.prototype,{constructor:{value:r}});Object.defineProperty(n,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.dirty=!0,this.uniforms.blur.value=1/7e3*t}}),e.exports=r},{"./AbstractFilter":23}],26:[function(t,e,i){"use strict";function r(){s.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"]}var s=t("./AbstractFilter"),n=r.prototype=Object.create(s.prototype,{constructor:{value:r}});Object.defineProperty(n,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.uniforms.blur.value=1/7e3*t}}),e.exports=r},{"./AbstractFilter":23}],27:[function(t,e,i){"use strict";function r(){s.call(this),this.passes=[this],this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform float invert;","uniform mat4 matrix;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;","   gl_FragColor = gl_FragColor * vColor;","}"]}var s=t("./AbstractFilter"),n=r.prototype=Object.create(s.prototype,{constructor:{value:r}});Object.defineProperty(n,"matrix",{get:function(){return this.uniforms.matrix.value},set:function(t){this.uniforms.matrix.value=t}}),e.exports=r},{"./AbstractFilter":23}],28:[function(t,e,i){"use strict";function r(){s.call(this),this.passes=[this],this.uniforms={step:{type:"1f",value:5}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float step;","void main(void) {","   vec4 color = texture2D(uSampler, vTextureCoord);","   color = floor(color * step) / step;","   gl_FragColor = color * vColor;","}"]}var s=t("./AbstractFilter"),n=r.prototype=Object.create(s.prototype,{constructor:{value:r}});Object.defineProperty(n,"step",{get:function(){return this.uniforms.step.value},set:function(t){this.uniforms.step.value=t}}),e.exports=r},{"./AbstractFilter":23}],29:[function(t,e,i){"use strict";function r(){s.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);","    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","    if (lum < 1.00) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.75) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.50) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.3) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","}"]}var s=t("./AbstractFilter"),n=r.prototype=Object.create(s.prototype,{constructor:{value:r}});Object.defineProperty(n,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.uniforms.blur.value=1/7e3*t}}),e.exports=r},{"./AbstractFilter":23}],30:[function(t,e,i){"use strict";function r(t){s.call(this),this.passes=[this],t.baseTexture._powerOf2=!0,this.uniforms={displacementMap:{type:"sampler2D",value:t},scale:{type:"2f",value:{x:30,y:30}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},t.baseTexture.hasLoaded?(this.uniforms.mapDimensions.value.x=t.width,this.uniforms.mapDimensions.value.y=t.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),t.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D displacementMap;","uniform sampler2D uSampler;","uniform vec2 scale;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   vec2 matSample = texture2D(displacementMap, mapCords).xy;","   matSample -= 0.5;","   matSample *= scale;","   matSample /= mapDimensions;","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);","   vec2 cord = vTextureCoord;","   gl_FragColor = gl_FragColor * vColor;","}"]}var s=t("./AbstractFilter"),n=r.prototype=Object.create(s.prototype,{constructor:{value:r}});n.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height,this.uniforms.displacementMap.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(n,"map",{get:function(){return this.uniforms.displacementMap.value},set:function(t){this.uniforms.displacementMap.value=t}}),Object.defineProperty(n,"scale",{get:function(){return this.uniforms.scale.value},set:function(t){this.uniforms.scale.value=t}}),Object.defineProperty(n,"offset",{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}}),e.exports=r},{"./AbstractFilter":23}],31:[function(t,e,i){"use strict";function r(){s.call(this),this.passes=[this],this.uniforms={scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float angle;","uniform float scale;","float pattern() {","   float s = sin(angle), c = cos(angle);","   vec2 tex = vTextureCoord * dimensions.xy;","   vec2 point = vec2(","       c * tex.x - s * tex.y,","       s * tex.x + c * tex.y","   ) * scale;","   return (sin(point.x) * sin(point.y)) * 4.0;","}","void main() {","   vec4 color = texture2D(uSampler, vTextureCoord);","   float average = (color.r + color.g + color.b) / 3.0;","   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);","}"]}var s=t("./AbstractFilter"),n=r.prototype=Object.create(s.prototype,{constructor:{value:r}});Object.defineProperty(n,"scale",{get:function(){return this.uniforms.scale.value},set:function(t){this.dirty=!0,this.uniforms.scale.value=t}}),Object.defineProperty(n,"angle",{get:function(){return this.uniforms.angle.value},set:function(t){this.dirty=!0,this.uniforms.angle.value=t}}),e.exports=r},{"./AbstractFilter":23}],32:[function(t,e,i){"use strict";function r(){this.visible=!0,this.renderable=!0}e.exports=r},{}],33:[function(t,e,i){"use strict";function r(){s.call(this),this.passes=[this],this.uniforms={gray:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float gray;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);","   gl_FragColor = gl_FragColor * vColor;","}"]}var s=t("./AbstractFilter"),n=r.prototype=Object.create(s.prototype,{constructor:{value:r}});Object.defineProperty(n,"gray",{get:function(){return this.uniforms.gray.value},set:function(t){this.uniforms.gray.value=t}}),e.exports=r},{"./AbstractFilter":23}],34:[function(t,e,i){"use strict";function r(){s.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform float invert;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);","   gl_FragColor = gl_FragColor * vColor;","}"]}var s=t("./AbstractFilter"),n=r.prototype=Object.create(s.prototype,{constructor:{value:r}});Object.defineProperty(n,"invert",{get:function(){return this.uniforms.invert.value},set:function(t){this.uniforms.invert.value=t}}),e.exports=r},{"./AbstractFilter":23}],35:[function(t,e,i){"use strict";function r(){s.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:0},dimensions:{type:"4fv",value:new Float32Array([1e4,100,10,10])},pixelSize:{type:"2f",value:{x:10,y:10}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform vec2 testDim;","uniform vec4 dimensions;","uniform vec2 pixelSize;","uniform sampler2D uSampler;","void main(void) {","   vec2 coord = vTextureCoord;","   vec2 size = dimensions.xy/pixelSize;","   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;","   gl_FragColor = texture2D(uSampler, color);","}"]}var s=t("./AbstractFilter"),n=r.prototype=Object.create(s.prototype,{constructor:{value:r}});Object.defineProperty(n,"size",{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.dirty=!0,this.uniforms.pixelSize.value=t}}),e.exports=r},{"./AbstractFilter":23}],36:[function(t,e,i){"use strict";function r(){s.call(this),this.passes=[this],this.uniforms={red:{type:"2f",value:{x:20,y:20}},green:{type:"2f",value:{x:-20,y:20}},blue:{type:"2f",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform vec2 red;","uniform vec2 green;","uniform vec2 blue;","uniform vec4 dimensions;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;","   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;","   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;","   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;","}"]}var s=t("./AbstractFilter"),n=r.prototype=Object.create(s.prototype,{constructor:{value:r}});Object.defineProperty(n,"angle",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.uniforms.blur.value=1/7e3*t}}),e.exports=r},{"./AbstractFilter":23}],37:[function(t,e,i){"use strict";function r(){s.call(this),this.passes=[this],this.uniforms={sepia:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform float sepia;","uniform sampler2D uSampler;","const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);","   gl_FragColor = gl_FragColor * vColor;","}"]}var s=t("./AbstractFilter"),n=r.prototype=Object.create(s.prototype,{constructor:{value:r}});Object.defineProperty(n,"sepia",{get:function(){return this.uniforms.sepia.value},set:function(t){this.uniforms.sepia.value=t}}),e.exports=r},{"./AbstractFilter":23}],38:[function(t,e,i){"use strict";function r(){s.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform sampler2D uSampler;","const vec2 delta = vec2(1.0/10.0, 0.0);","float random(vec3 scale, float seed) {","   return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);","}","void main(void) {","   vec4 color = vec4(0.0);","   float total = 0.0;","   float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);","   for (float t = -30.0; t <= 30.0; t++) {","       float percent = (t + offset - 0.5) / 30.0;","       float weight = 1.0 - abs(percent);","       vec4 sample = texture2D(uSampler, vTextureCoord + delta * percent);","       sample.rgb *= sample.a;","       color += sample * weight;","       total += weight;","   }","   gl_FragColor = color / total;","   gl_FragColor.rgb /= gl_FragColor.a + 0.00001;","}"]}var s=t("./AbstractFilter"),n=r.prototype=Object.create(s.prototype,{constructor:{value:r}});Object.defineProperty(n,"blur",{get:function(){return this.uniforms.blur.value},set:function(t){this.uniforms.blur.value=t}}),e.exports=r},{"./AbstractFilter":23}],39:[function(t,e,i){"use strict";function r(){s.call(this),this.passes=[this],this.uniforms={radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"2f",value:{x:.5,y:.5}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float radius;","uniform float angle;","uniform vec2 offset;","void main(void) {","   vec2 coord = vTextureCoord - offset;","   float distance = length(coord);","   if (distance < radius) {","       float ratio = (radius - distance) / radius;","       float angleMod = ratio * ratio * angle;","       float s = sin(angleMod);","       float c = cos(angleMod);","       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);","   }","   gl_FragColor = texture2D(uSampler, coord+offset);","}"]}var s=t("./AbstractFilter"),n=r.prototype=Object.create(s.prototype,{constructor:{value:r}});Object.defineProperty(n,"offset",{get:function(){return this.uniforms.offset.value},set:function(t){this.dirty=!0,this.uniforms.offset.value=t}}),Object.defineProperty(n,"radius",{get:function(){return this.uniforms.radius.value},set:function(t){this.dirty=!0,this.uniforms.radius.value=t}}),Object.defineProperty(n,"angle",{get:function(){return this.uniforms.angle.value},set:function(t){this.dirty=!0,this.uniforms.angle.value=t}}),e.exports=r},{"./AbstractFilter":23}],40:[function(t,e,i){"use strict";function r(t,e,i){this.x=t||0,this.y=e||0,this.radius=i||0}var s=r.prototype;s.clone=function(){return new r(this.x,this.y,this.radius)},s.contains=function(t,e){if(this.radius<=0)return!1;var i=this.x-t,r=this.y-e,s=this.radius*this.radius;return i*=i,r*=r,s>=i+r},e.exports=r},{}],41:[function(t,e,i){"use strict";function r(t,e,i,r){this.x=t||0,this.y=e||0,this.width=i||0,this.height=r||0}var s=t("./Rectangle"),n=r.prototype;n.clone=function(){return new r(this.x,this.y,this.width,this.height)},n.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width-.5,r=(e-this.y)/this.height-.5;return i*=i,r*=r,.25>i+r},n.getBounds=function(){return new s(this.x,this.y,this.width,this.height)},e.exports=r},{"./Rectangle":44}],42:[function(t,e,i){"use strict";function r(t,e){this.x=t||0,this.y=e||0}r.prototype.clone=function(){return new r(this.x,this.y)},e.exports=r},{}],43:[function(t,e,i){"use strict";function r(t){if(t instanceof Array||(t=Array.prototype.slice.call(arguments)),"number"==typeof t[0]){for(var e=[],i=0,r=t.length;r>i;i+=2)e.push(new s(t[i],t[i+1]));t=e}this.points=t}var s=t("./Point"),n=r.prototype;n.clone=function(){for(var t=[],e=0;e<this.points.length;e++)t.push(this.points[e].clone());return new r(t)},n.contains=function(t,e){for(var i=!1,r=0,s=this.points.length-1;r<this.points.length;s=r++){var n=this.points[r].x,o=this.points[r].y,a=this.points[s].x,h=this.points[s].y,l=o>e!=h>e&&(a-n)*(e-o)/(h-o)+n>t;l&&(i=!i)}return i},e.exports=r},{"./Point":42}],44:[function(t,e,i){"use strict";function r(t,e,i,r){this.x=t||0,this.y=e||0,this.width=i||0,this.height=r||0}var s=r.prototype;s.clone=function(){return new r(this.x,this.y,this.width,this.height)},s.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=this.x;if(t>=i&&t<=i+this.width){var r=this.y;if(e>=r&&e<=r+this.height)return!0}return!1},e.exports=r},{}],45:[function(t,e,i){"use strict";var r=i.Matrix="undefined"!=typeof Float32Array?Float32Array:Array,s=i.mat3={},n=i.mat4={};s.create=function(){var t=new r(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},s.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.create=function(){var t=new r(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},s.multiply=function(t,e,i){i||(i=t);var r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],h=t[5],l=t[6],u=t[7],c=t[8],f=e[0],d=e[1],p=e[2],v=e[3],g=e[4],m=e[5],x=e[6],b=e[7],y=e[8];return i[0]=f*r+d*o+p*l,i[1]=f*s+d*a+p*u,i[2]=f*n+d*h+p*c,i[3]=v*r+g*o+m*l,i[4]=v*s+g*a+m*u,i[5]=v*n+g*h+m*c,i[6]=x*r+b*o+y*l,i[7]=x*s+b*a+y*u,i[8]=x*n+b*h+y*c,i},s.clone=function(t){var e=new r(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},s.transpose=function(t,e){if(!e||t===e){var i=t[1],r=t[2],s=t[5];return t[1]=t[3],t[2]=t[6],t[3]=i,t[5]=t[7],t[6]=r,t[7]=s,t}return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],e},s.toMat4=function(t,e){return e||(e=n.create()),e[15]=1,e[14]=0,e[13]=0,e[12]=0,e[11]=0,e[10]=t[8],e[9]=t[7],e[8]=t[6],e[7]=0,e[6]=t[5],e[5]=t[4],e[4]=t[3],e[3]=0,e[2]=t[2],e[1]=t[1],e[0]=t[0],e},n.create=function(){var t=new r(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.transpose=function(t,e){if(!e||t===e){var i=t[1],r=t[2],s=t[3],n=t[6],o=t[7],a=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=i,t[6]=t[9],t[7]=t[13],t[8]=r,t[9]=n,t[11]=t[14],t[12]=s,t[13]=o,t[14]=a,t}return e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15],e},n.multiply=function(t,e,i){i||(i=t);var r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],h=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],p=t[11],v=t[12],g=t[13],m=t[14],x=t[15],b=e[0],y=e[1],_=e[2],T=e[3];return i[0]=b*r+y*a+_*c+T*v,i[1]=b*s+y*h+_*f+T*g,i[2]=b*n+y*l+_*d+T*m,i[3]=b*o+y*u+_*p+T*x,b=e[4],y=e[5],_=e[6],T=e[7],i[4]=b*r+y*a+_*c+T*v,i[5]=b*s+y*h+_*f+T*g,i[6]=b*n+y*l+_*d+T*m,i[7]=b*o+y*u+_*p+T*x,b=e[8],y=e[9],_=e[10],T=e[11],i[8]=b*r+y*a+_*c+T*v,i[9]=b*s+y*h+_*f+T*g,i[10]=b*n+y*l+_*d+T*m,i[11]=b*o+y*u+_*p+T*x,b=e[12],y=e[13],_=e[14],T=e[15],i[12]=b*r+y*a+_*c+T*v,i[13]=b*s+y*h+_*f+T*g,i[14]=b*n+y*l+_*d+T*m,i[15]=b*o+y*u+_*p+T*x,i}},{}],46:[function(t,e,i){"use strict";var r=t("./core/globals"),s=t("./renderers/webgl/shaders"),n=t("./geom/matrix"),o=e.exports=Object.create(r);o.Point=t("./geom/Point"),o.Rectangle=t("./geom/Rectangle"),o.Polygon=t("./geom/Polygon"),o.Circle=t("./geom/Circle"),o.Ellipse=t("./geom/Ellipse"),o.Matrix=n.Matrix,o.mat3=n.mat3,o.mat4=n.mat4,o.blendModes=t("./display/blendModes"),o.DisplayObject=t("./display/DisplayObject"),o.DisplayObjectContainer=t("./display/DisplayObjectContainer"),o.Sprite=t("./display/Sprite"),o.MovieClip=t("./display/MovieClip"),o.AbstractFilter=t("./filters/AbstractFilter"),o.BlurFilter=t("./filters/BlurFilter"),o.BlurXFilter=t("./filters/BlurXFilter"),o.BlurYFilter=t("./filters/BlurYFilter"),o.ColorMatrixFilter=t("./filters/ColorMatrixFilter"),o.ColorStepFilter=t("./filters/ColorStepFilter"),o.CrossHatchFilter=t("./filters/CrossHatchFilter"),o.DisplacementFilter=t("./filters/DisplacementFilter"),o.DotScreenFilter=t("./filters/DotScreenFilter"),o.FilterBlock=t("./filters/FilterBlock"),o.GrayFilter=t("./filters/GrayFilter"),o.InvertFilter=t("./filters/InvertFilter"),o.PixelateFilter=t("./filters/PixelateFilter"),o.RGBSplitFilter=t("./filters/RGBSplitFilter"),o.SepiaFilter=t("./filters/SepiaFilter"),o.SmartBlurFilter=t("./filters/SmartBlurFilter"),o.TwistFilter=t("./filters/TwistFilter"),o.Text=t("./text/Text"),o.BitmapText=t("./text/BitmapText"),o.InteractionManager=t("./InteractionManager"),o.Stage=t("./display/Stage"),o.EventTarget=t("./events/EventTarget"),o.autoDetectRenderer=t("./utils/autoDetectRenderer"),o.PolyK=t("./utils/Polyk"),o.WebGLGraphics=t("./renderers/webgl/graphics"),o.WebGLRenderer=t("./renderers/webgl/WebGLRenderer"),o.WebGLBatch=t("./renderers/webgl/WebGLBatch"),o.WebGLRenderGroup=t("./renderers/webgl/WebGLRenderGroup"),o.CanvasRenderer=t("./renderers/canvas/CanvasRenderer"),o.CanvasGraphics=t("./renderers/canvas/graphics"),o.Graphics=t("./primitives/Graphics"),o.Strip=t("./extras/Strip"),o.Rope=t("./extras/Rope"),o.TilingSprite=t("./extras/TilingSprite"),o.Spine=t("./extras/Spine"),o.CustomRenderable=t("./extras/CustomRenderable"),o.BaseTexture=t("./textures/BaseTexture"),o.Texture=t("./textures/Texture"),o.RenderTexture=t("./textures/RenderTexture"),o.AssetLoader=t("./loaders/AssetLoader"),o.JsonLoader=t("./loaders/JsonLoader"),o.SpriteSheetLoader=t("./loaders/SpriteSheetLoader"),o.ImageLoader=t("./loaders/ImageLoader"),o.BitmapFontLoader=t("./loaders/BitmapFontLoader"),o.SpineLoader=t("./loaders/SpineLoader"),o.initDefaultShaders=s.initDefaultShaders,o.activatePrimitiveShader=s.activatePrimitiveShader,o.deactivatePrimitiveShader=s.deactivatePrimitiveShader,o.activateStripShader=s.activateStripShader,o.deactivateStripShader=s.deactivateStripShader;var a=t("./utils/debug");o.runList=a.runList},{"./InteractionManager":9,"./core/globals":10,"./display/DisplayObject":11,"./display/DisplayObjectContainer":12,"./display/MovieClip":13,"./display/Sprite":14,"./display/Stage":15,"./display/blendModes":16,"./events/EventTarget":17,"./extras/CustomRenderable":18,"./extras/Rope":19,"./extras/Spine":20,"./extras/Strip":21,"./extras/TilingSprite":22,"./filters/AbstractFilter":23,"./filters/BlurFilter":24,"./filters/BlurXFilter":25,"./filters/BlurYFilter":26,"./filters/ColorMatrixFilter":27,"./filters/ColorStepFilter":28,"./filters/CrossHatchFilter":29,"./filters/DisplacementFilter":30,"./filters/DotScreenFilter":31,"./filters/FilterBlock":32,"./filters/GrayFilter":33,"./filters/InvertFilter":34,"./filters/PixelateFilter":35,"./filters/RGBSplitFilter":36,"./filters/SepiaFilter":37,"./filters/SmartBlurFilter":38,"./filters/TwistFilter":39,"./geom/Circle":40,"./geom/Ellipse":41,"./geom/Point":42,"./geom/Polygon":43,"./geom/Rectangle":44,"./geom/matrix":45,"./loaders/AssetLoader":47,"./loaders/BitmapFontLoader":48,"./loaders/ImageLoader":49,"./loaders/JsonLoader":50,"./loaders/SpineLoader":51,"./loaders/SpriteSheetLoader":52,"./primitives/Graphics":54,"./renderers/canvas/CanvasRenderer":55,"./renderers/canvas/graphics":56,"./renderers/webgl/WebGLBatch":60,"./renderers/webgl/WebGLRenderGroup":62,"./renderers/webgl/WebGLRenderer":63,"./renderers/webgl/graphics":65,"./renderers/webgl/shaders":66,"./text/BitmapText":67,"./text/Text":68,"./textures/BaseTexture":69,"./textures/RenderTexture":70,"./textures/Texture":71,"./utils/Polyk":72,"./utils/autoDetectRenderer":73,"./utils/debug":75}],47:[function(t,e,i){"use strict";function r(t){var e="data:",i=t.slice(0,e.length).toLowerCase();if(i===e){var r=t.slice(e.length),s=r.indexOf(",");if(-1===s)return null;var n=r.slice(0,s).split(";")[0];return n&&"text/plain"!==n.toLowerCase()?n.split("/").pop().toLowerCase():"txt"}return null}function s(t,e){n.call(this),this.assetURLs=t,this.crossorigin=e}var n=t("../events/EventTarget"),o={},a=s.prototype;a.load=function(){function t(){e.onAssetLoaded()}var e=this;this.loadCount=this.assetURLs.length;for(var i=0,s=this.assetURLs.length;s>i;i++){var n=this.assetURLs[i],a=r(n);a||(a=n.split("?").shift().split(".").pop().toLowerCase());var h=o[a];if(!h)throw new Error(a+" is an unsupported file type");var l=new h(n,this.crossorigin);l.addEventListener("loaded",t),l.load()}},a.onAssetLoaded=function(){this.loadCount--,this.dispatchEvent({type:"onProgress",content:this}),this.onProgress&&this.onProgress(),this.loadCount||(this.dispatchEvent({type:"onComplete",content:this}),this.onComplete&&this.onComplete())},s.registerLoaderType=function(t,e){o[t]=e},e.exports=s},{"../events/EventTarget":17}],48:[function(t,e,i){"use strict";function r(t,e){a.call(this),this.url=t,this.crossorigin=e,this.baseUrl=t.replace(/[^\/]*$/,""),this.texture=null}var s=t("./AssetLoader"),n=t("./ImageLoader"),o=t("../geom/Rectangle"),a=t("../events/EventTarget"),h=t("../text/BitmapText"),l=t("../textures/Texture"),u=t("../platform"),c=r.prototype;c.handleEvent=function(t){switch(t.type){case"load":this.onXMLLoaded();break;default:this.onError()}},c.load=function(){this.request=u.createRequest(),this.request.addEventListener("load",this),this.request.addEventListener("error",this),this.request.open("GET",this.url,!0),this.request.overrideMimeType&&this.request.overrideMimeType("application/xml"),this.request.send(null)},c.onXMLLoaded=function(){var t=this.baseUrl+this.request.responseXML.getElementsByTagName("page")[0].attributes.getNamedItem("file").nodeValue,e=new n(t,this.crossorigin);this.texture=e.texture.baseTexture;var i={},r=this.request.responseXML.getElementsByTagName("info")[0],s=this.request.responseXML.getElementsByTagName("common")[0];i.font=r.attributes.getNamedItem("face").nodeValue,i.size=parseInt(r.attributes.getNamedItem("size").nodeValue,10),i.lineHeight=parseInt(s.attributes.getNamedItem("lineHeight").nodeValue,10),i.chars={};for(var a=this.request.responseXML.getElementsByTagName("char"),u=0;u<a.length;u++){var c=parseInt(a[u].attributes.getNamedItem("id").nodeValue,10),f=new o(parseInt(a[u].attributes.getNamedItem("x").nodeValue,10),parseInt(a[u].attributes.getNamedItem("y").nodeValue,10),parseInt(a[u].attributes.getNamedItem("width").nodeValue,10),parseInt(a[u].attributes.getNamedItem("height").nodeValue,10));i.chars[c]={xOffset:parseInt(a[u].attributes.getNamedItem("xoffset").nodeValue,10),yOffset:parseInt(a[u].attributes.getNamedItem("yoffset").nodeValue,10),xAdvance:parseInt(a[u].attributes.getNamedItem("xadvance").nodeValue,10),kerning:{},texture:l.cache[c]=new l(this.texture,f)}}var d=this.request.responseXML.getElementsByTagName("kerning");for(u=0;u<d.length;u++){var p=parseInt(d[u].attributes.getNamedItem("first").nodeValue,10),v=parseInt(d[u].attributes.getNamedItem("second").nodeValue,10),g=parseInt(d[u].attributes.getNamedItem("amount").nodeValue,10);i.chars[v].kerning[p]=g}h.fonts[i.font]=i;var m=this;e.addEventListener("loaded",function(){m.onLoaded()}),e.load()},c.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},c.onError=function(){this.dispatchEvent({type:"error",content:this})},s.registerLoaderType("xml",r),s.registerLoaderType("fnt",r),e.exports=r},{"../events/EventTarget":17,"../geom/Rectangle":44,"../platform":53,"../text/BitmapText":67,"../textures/Texture":71,"./AssetLoader":47,"./ImageLoader":49}],49:[function(t,e,i){"use strict";function r(t,e){n.call(this),this.texture=o.fromImage(t,e),this.frames=[]}var s=t("./AssetLoader"),n=t("../events/EventTarget"),o=t("../textures/Texture"),a=r.prototype;a.load=function(){if(this.texture.baseTexture.hasLoaded)this.onLoaded();else{var t=this;this.texture.baseTexture.addEventListener("loaded",function(){t.onLoaded()})}},a.onLoaded=function(){this.dispatchEvent({type:"loaded",content:this})},a.loadFramedSpriteSheet=function(t,e,i){this.frames=[];for(var r=Math.floor(this.texture.width/t),s=Math.floor(this.texture.height/e),n=0,a=0;s>a;a++)for(var h=0;r>h;h++,n++){var l=new o(this.texture,{x:h*t,y:a*e,width:t,height:e});this.frames.push(l),i&&(o.cache[i+"-"+n]=l)}if(this.texture.baseTexture.hasLoaded)this.onLoaded();else{var u=this;this.texture.baseTexture.addEventListener("loaded",function(){u.onLoaded()})}},s.registerLoaderType("jpg",r),s.registerLoaderType("jpeg",r),s.registerLoaderType("png",r),s.registerLoaderType("gif",r),e.exports=r},{"../events/EventTarget":17,"../textures/Texture":71,"./AssetLoader":47}],50:[function(t,e,i){
"use strict";function r(t,e){o.call(this),this.url=t,this.crossorigin=e,this.baseUrl=t.replace(/[^\/]*$/,""),this.loaded=!1}var s=t("./AssetLoader"),n=t("./ImageLoader"),o=t("../events/EventTarget"),a=t("../textures/Texture"),h=t("../extras/Spine"),l=t("../utils/spine").SkeletonJson,u=t("../platform"),c=r.prototype;c.handleEvent=function(t){switch(t.type){case"load":this.onJSONLoaded();break;default:this.onError()}},c.load=function(){this.request=u.createRequest(),this.request.addEventListener("load",this),this.request.addEventListener("error",this),this.request.open("GET",this.url,!0),this.request.overrideMimeType&&this.request.overrideMimeType("application/json"),this.request.send(null)},c.onJSONLoaded=function(){if(this.json=JSON.parse(this.request.responseText),this.json.frames){var t=this,e=this.baseUrl+this.json.meta.image,i=new n(e,this.crossorigin),r=this.json.frames;this.texture=i.texture.baseTexture,i.addEventListener("loaded",function(){t.onLoaded()});for(var s in r){var o=r[s].frame;o&&(a.cache[s]=new a(this.texture,{x:o.x,y:o.y,width:o.w,height:o.h}),r[s].trimmed&&(a.cache[s].realSize=r[s].spriteSourceSize,a.cache[s].trim.x=0))}i.load()}else if(this.json.bones){var u=new l,c=u.readSkeletonData(this.json);h.animCache[this.url]=c,this.onLoaded()}else this.onLoaded()},c.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},c.onError=function(){this.dispatchEvent({type:"error",content:this})},s.registerLoaderType("json",r),e.exports=r},{"../events/EventTarget":17,"../extras/Spine":20,"../platform":53,"../textures/Texture":71,"../utils/spine":76,"./AssetLoader":47,"./ImageLoader":49}],51:[function(t,e,i){"use strict";function r(t,e){o.call(this),this.url=t,this.crossorigin=e,this.loaded=!1}var s=t("./AssetLoader"),n=t("./JsonLoader"),o=t("../events/EventTarget"),a=t("../extras/Spine"),h=t("../utils/spine").SkeletonJson,l=r.prototype;l.load=function(){var t=this,e=new n(this.url,this.crossorigin);e.addEventListener("loaded",function(e){t.json=e.content.json,t.onJSONLoaded()}),e.load()},l.onJSONLoaded=function(){var t=new h,e=t.readSkeletonData(this.json);a.animCache[this.url]=e,this.onLoaded()},l.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},s.registerLoaderType("anim",r),e.exports=r},{"../events/EventTarget":17,"../extras/Spine":20,"../utils/spine":76,"./AssetLoader":47,"./JsonLoader":50}],52:[function(t,e,i){"use strict";function r(t,e){o.call(this),this.url=t,this.crossorigin=e,this.baseUrl=t.replace(/[^\/]*$/,""),this.texture=null,this.frames={}}var s=t("./JsonLoader"),n=t("./ImageLoader"),o=t("../events/EventTarget"),a=t("../textures/Texture"),h=r.prototype;h.load=function(){var t=this,e=new s(this.url,this.crossorigin);e.addEventListener("loaded",function(e){t.json=e.content.json,t.onJSONLoaded()}),e.load()},h.onJSONLoaded=function(){var t=this,e=this.baseUrl+this.json.meta.image,i=new n(e,this.crossorigin),r=this.json.frames;this.texture=i.texture.baseTexture,i.addEventListener("loaded",function(){t.onLoaded()});for(var s in r){var o=r[s].frame;o&&(a.cache[s]=new a(this.texture,{x:o.x,y:o.y,width:o.w,height:o.h}),r[s].trimmed&&(a.cache[s].realSize=r[s].spriteSourceSize,a.cache[s].trim.x=0))}i.load()},h.onLoaded=function(){this.dispatchEvent({type:"loaded",content:this})},e.exports=r},{"../events/EventTarget":17,"../textures/Texture":71,"./ImageLoader":49,"./JsonLoader":50}],53:[function(t,e,i){(function(t){!function(t){"use strict";e.exports={global:t,console:t.console,document:t.document,location:t.location,navigator:t.navigator,window:t.window,createCanvas:function(){return t.document.createElement("canvas")},createImage:function(){return new t.Image},createRequest:function(){return new t.XMLHttpRequest}}}("undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],54:[function(t,e,i){"use strict";function r(){s.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor="black",this.graphicsData=[],this.currentPath={points:[]}}var s=t("../display/DisplayObjectContainer"),n=t("../geom/Rectangle"),o=r.prototype=Object.create(s.prototype,{constructor:{value:r}});o.lineStyle=function(t,e,i){this.currentPath.points.length||this.graphicsData.pop(),this.lineWidth=t||0,this.lineColor=e||0,this.lineAlpha=arguments.length<3?1:i,this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:r.POLY},this.graphicsData.push(this.currentPath)},o.moveTo=function(t,e){this.currentPath.points.length||this.graphicsData.pop(),this.currentPath=this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:r.POLY},this.currentPath.points.push(t,e),this.graphicsData.push(this.currentPath)},o.lineTo=function(t,e){this.currentPath.points.push(t,e),this.dirty=!0},o.beginFill=function(t,e){this.filling=!0,this.fillColor=t||0,this.fillAlpha=arguments.length<2?1:e},o.endFill=function(){this.filling=!1,this.fillColor=null,this.fillAlpha=1},o.drawRect=function(t,e,i,s){this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[t,e,i,s],type:r.RECT},this.graphicsData.push(this.currentPath),this.dirty=!0},o.drawCircle=function(t,e,i){this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[t,e,i,i],type:r.CIRC},this.graphicsData.push(this.currentPath),this.dirty=!0},o.drawElipse=function(t,e,i,s){this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[t,e,i,s],type:r.ELIP},this.graphicsData.push(this.currentPath),this.dirty=!0},o.clear=function(){this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this.bounds=null},o.updateFilterBounds=function(){if(!this.bounds){for(var t,e,i,s=1/0,o=-(1/0),a=1/0,h=-(1/0),l=0;l<this.graphicsData.length;l++){var u=this.graphicsData[l],c=u.type,f=u.lineWidth;if(t=u.points,c===r.RECT){e=t.x-f/2,i=t.y-f/2;var d=t.width+f,p=t.height+f;s=s>e?e:s,o=e+d>o?e+d:o,a=a>i?e:a,h=i+p>h?i+p:h}else if(c===r.CIRC||c===r.ELIP){e=t.x,i=t.y;var v=t.radius+f/2;s=s>e-v?e-v:s,o=e+v>o?e+v:o,a=a>i-v?i-v:a,h=i+v>h?i+v:h}else for(var g=0;g<t.length;g+=2)e=t[g],i=t[g+1],s=s>e-f?e-f:s,o=e+f>o?e+f:o,a=a>i-f?i-f:a,h=i+f>h?i+f:h}this.bounds=new n(s,a,o-s,h-a)}},r.POLY=0,r.RECT=1,r.CIRC=2,r.ELIP=3,e.exports=r},{"../display/DisplayObjectContainer":12,"../geom/Rectangle":44}],55:[function(t,e,i){"use strict";function r(t,e,i,r){this.transparent=r,this.width=t||800,this.height=e||600,this.view=i||s.createCanvas(),this.context=this.view.getContext("2d"),this.smoothProperty=null,"imageSmoothingEnabled"in this.context?this.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context&&(this.smoothProperty="oImageSmoothingEnabled"),this.scaleMode=null,this.refresh=!0,this.view.width=this.width,this.view.height=this.height,this.count=0}var s=t("../../platform"),n=t("../../core/globals"),o=t("./graphics"),a=t("../../textures/BaseTexture"),h=t("../../textures/Texture"),l=t("../../display/Sprite"),u=t("../../extras/TilingSprite"),c=t("../../extras/Strip"),f=t("../../extras/CustomRenderable"),d=t("../../primitives/Graphics"),p=t("../../filters/FilterBlock"),v=r.prototype;v.render=function(t){n.texturesToUpdate=[],n.texturesToDestroy=[],n.visibleCount++,t.updateTransform(),this.view.style.backgroundColor===t.backgroundColorString||this.transparent||(this.view.style.backgroundColor=t.backgroundColorString),this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height),this.renderDisplayObject(t),t.interactive&&(t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this))),h.frameUpdates.length>0&&(h.frameUpdates=[])},v.resize=function(t,e){this.width=t,this.height=e,this.view.width=t,this.view.height=e},v.renderDisplayObject=function(t){var e,i=this.context;i.globalCompositeOperation="source-over";var r=t.last._iNext;t=t.first;do if(e=t.worldTransform,t.visible)if(t.renderable){if(t instanceof l){var s=t.texture.frame;s&&s.width&&s.height&&t.texture.baseTexture.source&&(i.globalAlpha=t.worldAlpha,i.setTransform(e[0],e[3],e[1],e[4],e[2],e[5]),this.smoothProperty&&this.scaleMode!==t.texture.baseTexture.scaleMode&&(this.scaleMode=t.texture.baseTexture.scaleMode,i[this.smoothProperty]=this.scaleMode===a.SCALE_MODE.LINEAR),i.drawImage(t.texture.baseTexture.source,s.x,s.y,s.width,s.height,t.anchor.x*-s.width,t.anchor.y*-s.height,s.width,s.height))}else if(t instanceof c)i.setTransform(e[0],e[3],e[1],e[4],e[2],e[5]),this.renderStrip(t);else if(t instanceof u)i.setTransform(e[0],e[3],e[1],e[4],e[2],e[5]),this.renderTilingSprite(t);else if(t instanceof f)i.setTransform(e[0],e[3],e[1],e[4],e[2],e[5]),t.renderCanvas(this);else if(t instanceof d)i.setTransform(e[0],e[3],e[1],e[4],e[2],e[5]),o.renderGraphics(t,i);else if(t instanceof p&&t.data instanceof d){var n=t.data;if(t.open){i.save();var h=n.alpha,v=n.worldTransform;i.setTransform(v[0],v[3],v[1],v[4],v[2],v[5]),n.worldAlpha=.5,i.worldAlpha=0,o.renderGraphicsMask(n,i),i.clip(),n.worldAlpha=h}else i.restore()}t=t._iNext}else t=t._iNext;else t=t.last._iNext;while(t!==r)},v.renderStripFlat=function(t){var e=this.context,i=t.verticies,r=i.length/2;this.count++,e.beginPath();for(var s=1;r-2>s;s++){var n=2*s,o=i[n],a=i[n+2],h=i[n+4],l=i[n+1],u=i[n+3],c=i[n+5];e.moveTo(o,l),e.lineTo(a,u),e.lineTo(h,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},v.renderTilingSprite=function(t){var e=this.context;e.globalAlpha=t.worldAlpha,t.__tilePattern||(t.__tilePattern=e.createPattern(t.texture.baseTexture.source,"repeat")),e.beginPath();var i=t.tilePosition,r=t.tileScale;e.scale(r.x,r.y),e.translate(i.x,i.y),e.fillStyle=t.__tilePattern,e.fillRect(-i.x,-i.y,t.width/r.x,t.height/r.y),e.scale(1/r.x,1/r.y),e.translate(-i.x,-i.y),e.closePath()},v.renderStrip=function(t){var e=this.context,i=t.verticies,r=t.uvs,s=i.length/2;this.count++;for(var n=1;s-2>n;n++){var o=2*n,a=i[o],h=i[o+2],l=i[o+4],u=i[o+1],c=i[o+3],f=i[o+5],d=r[o]*t.texture.width,p=r[o+2]*t.texture.width,v=r[o+4]*t.texture.width,g=r[o+1]*t.texture.height,m=r[o+3]*t.texture.height,x=r[o+5]*t.texture.height;e.save(),e.beginPath(),e.moveTo(a,u),e.lineTo(h,c),e.lineTo(l,f),e.closePath(),e.clip();var b=d*m+g*v+p*x-m*v-g*p-d*x,y=a*m+g*l+h*x-m*l-g*h-a*x,_=d*h+a*v+p*l-h*v-a*p-d*l,T=d*m*l+g*h*v+a*p*x-a*m*v-g*p*l-d*h*x,A=u*m+g*f+c*x-m*f-g*c-u*x,w=d*c+u*v+p*f-c*v-u*p-d*f,E=d*m*f+g*c*v+u*p*x-u*m*v-g*p*f-d*c*x;e.transform(y/b,A/b,_/b,w/b,T/b,E/b),e.drawImage(t.texture.baseTexture.source,0,0),e.restore()}},e.exports=r},{"../../core/globals":10,"../../display/Sprite":14,"../../extras/CustomRenderable":18,"../../extras/Strip":21,"../../extras/TilingSprite":22,"../../filters/FilterBlock":32,"../../platform":53,"../../primitives/Graphics":54,"../../textures/BaseTexture":69,"../../textures/Texture":71,"./graphics":56}],56:[function(t,e,i){"use strict";var r=t("../../platform"),s=t("../../primitives/Graphics");i.renderGraphics=function(t,e){for(var i,r,n,o,a=t.worldAlpha,h="",l=0,u=t.graphicsData.length;u>l;l++)if(i=t.graphicsData[l],r=i.points,h=e.strokeStyle="#"+("00000"+(0|i.lineColor).toString(16)).substr(-6),e.lineWidth=i.lineWidth,i.type===s.POLY){for(e.beginPath(),e.moveTo(r[0],r[1]),n=1,o=r.length/2;o>n;n++)e.lineTo(r[2*n],r[2*n+1]);r[0]===r[r.length-2]&&r[1]===r[r.length-1]&&e.closePath(),i.fill&&(e.globalAlpha=i.fillAlpha*a,e.fillStyle=h="#"+("00000"+(0|i.fillColor).toString(16)).substr(-6),e.fill()),i.lineWidth&&(e.globalAlpha=i.lineAlpha*a,e.stroke())}else if(i.type===s.RECT)(i.fillColor||0===i.fillColor)&&(e.globalAlpha=i.fillAlpha*a,e.fillStyle=h="#"+("00000"+(0|i.fillColor).toString(16)).substr(-6),e.fillRect(r[0],r[1],r[2],r[3])),i.lineWidth&&(e.globalAlpha=i.lineAlpha*a,e.strokeRect(r[0],r[1],r[2],r[3]));else if(i.type===s.CIRC)e.beginPath(),e.arc(r[0],r[1],r[2],0,2*Math.PI),e.closePath(),i.fill&&(e.globalAlpha=i.fillAlpha*a,e.fillStyle=h="#"+("00000"+(0|i.fillColor).toString(16)).substr(-6),e.fill()),i.lineWidth&&(e.globalAlpha=i.lineAlpha*a,e.stroke());else if(i.type===s.ELIP){var c=i.points,f=2*c[2],d=2*c[3],p=c[0]-f/2,v=c[1]-d/2;e.beginPath();var g=.5522848,m=f/2*g,x=d/2*g,b=p+f,y=v+d,_=p+f/2,T=v+d/2;e.moveTo(p,T),e.bezierCurveTo(p,T-x,_-m,v,_,v),e.bezierCurveTo(_+m,v,b,T-x,b,T),e.bezierCurveTo(b,T+x,_+m,y,_,y),e.bezierCurveTo(_-m,y,p,T+x,p,T),e.closePath(),i.fill&&(e.globalAlpha=i.fillAlpha*a,e.fillStyle=h="#"+("00000"+(0|i.fillColor).toString(16)).substr(-6),e.fill()),i.lineWidth&&(e.globalAlpha=i.lineAlpha*a,e.stroke())}},i.renderGraphicsMask=function(t,e){var i=t.graphicsData.length;if(0!==i){i>1&&(i=1,r.console.warn("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));for(var n=0;1>n;n++){var o=t.graphicsData[n],a=o.points;if(o.type===s.POLY){e.beginPath(),e.moveTo(a[0],a[1]);for(var h=1;h<a.length/2;h++)e.lineTo(a[2*h],a[2*h+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath()}else if(o.type===s.RECT)e.beginPath(),e.rect(a[0],a[1],a[2],a[3]),e.closePath();else if(o.type===s.CIRC)e.beginPath(),e.arc(a[0],a[1],a[2],0,2*Math.PI),e.closePath();else if(o.type===s.ELIP){var l=o.points,u=2*l[2],c=2*l[3],f=l[0]-u/2,d=l[1]-c/2;e.beginPath();var p=.5522848,v=u/2*p,g=c/2*p,m=f+u,x=d+c,b=f+u/2,y=d+c/2;e.moveTo(f,y),e.bezierCurveTo(f,y-g,b-v,d,b,d),e.bezierCurveTo(b+v,d,m,y-g,m,y),e.bezierCurveTo(m,y+g,b+v,x,b,x),e.bezierCurveTo(b-v,x,f,y+g,f,y),e.closePath()}}}}},{"../../platform":53,"../../primitives/Graphics":54}],57:[function(t,e,i){"use strict";function r(){this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor;","}"],this.textureCount=0}var s=t("./compile"),n=t("../../core/globals"),o=r.prototype;o.init=function(){var t=n.gl,e=s.program(t,this.vertexSrc||r.defaultVertexSrc,this.fragmentSrc);t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.dimensions=t.getUniformLocation(e,"dimensions"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.colorAttribute=t.getAttribLocation(e,"aColor"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord");for(var i in this.uniforms)this.uniforms[i].uniformLocation=t.getUniformLocation(e,i);this.initUniforms(),this.program=e},o.initUniforms=function(){this.textureCount=1;var t;for(var e in this.uniforms){t=this.uniforms[e];var i=t.type;"sampler2D"===i?(t._init=!1,null!==t.value&&this.initSampler2D(t)):"mat2"===i||"mat3"===i||"mat4"===i?(t.glMatrix=!0,t.glValueLength=1,"mat2"===i?t.glFunc=n.gl.uniformMatrix2fv:"mat3"===i?t.glFunc=n.gl.uniformMatrix3fv:"mat4"===i&&(t.glFunc=n.gl.uniformMatrix4fv)):(t.glFunc=n.gl["uniform"+i],"2f"===i||"2i"===i?t.glValueLength=2:"3f"===i||"3i"===i?t.glValueLength=3:"4f"===i||"4i"===i?t.glValueLength=4:t.glValueLength=1)}},o.initSampler2D=function(t){if(t.value&&t.value.baseTexture&&t.value.baseTexture.hasLoaded){if(n.gl.activeTexture(n.gl["TEXTURE"+this.textureCount]),n.gl.bindTexture(n.gl.TEXTURE_2D,t.value.baseTexture._glTexture),t.textureData){var e=t.textureData,i=e.magFilter?e.magFilter:n.gl.LINEAR,r=e.minFilter?e.minFilter:n.gl.LINEAR,s=e.wrapS?e.wrapS:n.gl.CLAMP_TO_EDGE,o=e.wrapT?e.wrapT:n.gl.CLAMP_TO_EDGE,a=e.luminance?n.gl.LUMINANCE:n.gl.RGBA;if(e.repeat&&(s=n.gl.REPEAT,o=n.gl.REPEAT),n.gl.pixelStorei(n.gl.UNPACK_FLIP_Y_WEBGL,!1),e.width){var h=e.width?e.width:512,l=e.height?e.height:2,u=e.border?e.border:0;n.gl.texImage2D(n.gl.TEXTURE_2D,0,a,h,l,u,a,n.gl.UNSIGNED_BYTE,null)}else n.gl.texImage2D(n.gl.TEXTURE_2D,0,a,n.gl.RGBA,n.gl.UNSIGNED_BYTE,t.value.baseTexture.source);n.gl.texParameteri(n.gl.TEXTURE_2D,n.gl.TEXTURE_MAG_FILTER,i),n.gl.texParameteri(n.gl.TEXTURE_2D,n.gl.TEXTURE_MIN_FILTER,r),n.gl.texParameteri(n.gl.TEXTURE_2D,n.gl.TEXTURE_WRAP_S,s),n.gl.texParameteri(n.gl.TEXTURE_2D,n.gl.TEXTURE_WRAP_T,o)}n.gl.uniform1i(t.uniformLocation,this.textureCount),t._init=!0,this.textureCount++}},o.syncUniforms=function(){this.textureCount=1;var t;for(var e in this.uniforms)t=this.uniforms[e],1===t.glValueLength?t.glMatrix===!0?t.glFunc.call(n.gl,t.uniformLocation,t.transpose,t.value):t.glFunc.call(n.gl,t.uniformLocation,t.value):2===t.glValueLength?t.glFunc.call(n.gl,t.uniformLocation,t.value.x,t.value.y):3===t.glValueLength?t.glFunc.call(n.gl,t.uniformLocation,t.value.x,t.value.y,t.value.z):4===t.glValueLength?t.glFunc.call(n.gl,t.uniformLocation,t.value.x,t.value.y,t.value.z,t.value.w):"sampler2D"===t.type&&(t._init?(n.gl.activeTexture(n.gl["TEXTURE"+this.textureCount]),n.gl.bindTexture(n.gl.TEXTURE_2D,t.value.baseTexture._glTexture),n.gl.uniform1i(t.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(t))},r.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],e.exports=r},{"../../core/globals":10,"./compile":64}],58:[function(t,e,i){"use strict";function r(){this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vColor = aColor  * alpha;","}"]}var s=t("./compile"),n=t("../../core/globals");r.prototype.init=function(){var t=n.gl,e=s.program(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.colorAttribute=t.getAttribLocation(e,"aColor"),this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},e.exports=r},{"../../core/globals":10,"./compile":64}],59:[function(t,e,i){"use strict";function r(){this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y));","   gl_FragColor = gl_FragColor * alpha;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","varying vec2 vTextureCoord;","varying vec2 offsetVector;","varying float vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition, 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"]}var s=t("./compile"),n=t("../../core/globals");r.prototype.init=function(){var t=n.gl,e=s.program(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.colorAttribute=t.getAttribLocation(e,"aColor"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},e.exports=r},{"../../core/globals":10,"./compile":64}],60:[function(t,e,i){"use strict";function r(t){this.gl=t,this.size=0,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.uvBuffer=t.createBuffer(),this.colorBuffer=t.createBuffer(),this.blendMode=n.NORMAL,this.dynamicSize=1}var s=t("../../core/globals"),n=t("../../display/blendModes"),o=r.prototype;o.clean=function(){this.verticies=[],this.uvs=[],this.indices=[],this.colors=[],this.dynamicSize=1,this.texture=null,this.last=null,this.size=0,this.head=null,this.tail=null},o.restoreLostContext=function(t){this.gl=t,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.uvBuffer=t.createBuffer(),this.colorBuffer=t.createBuffer()},o.init=function(t){t.batch=this,this.dirty=!0,this.blendMode=t.blendMode,this.texture=t.texture.baseTexture,this.head=t,this.tail=t,this.size=1,this.growBatch()},o.insertBefore=function(t,e){this.size++,t.batch=this,this.dirty=!0;var i=e.__prev;e.__prev=t,t.__next=e,i?(t.__prev=i,i.__next=t):this.head=t},o.insertAfter=function(t,e){this.size++,t.batch=this,this.dirty=!0;var i=e.__next;e.__next=t,t.__prev=e,i?(t.__next=i,i.__prev=t):this.tail=t},o.remove=function(t){return this.size--,this.size?(t.__prev?t.__prev.__next=t.__next:(this.head=t.__next,this.head.__prev=null),t.__next?t.__next.__prev=t.__prev:(this.tail=t.__prev,this.tail.__next=null),t.batch=null,t.__next=null,t.__prev=null,void(this.dirty=!0)):(t.batch=null,t.__prev=null,void(t.__next=null))},o.split=function(t){this.dirty=!0;var e=new r(this.gl);e.init(t),e.texture=this.texture,e.tail=this.tail,this.tail=t.__prev,this.tail.__next=null,t.__prev=null;for(var i=0;t;)i++,t.batch=e,t=t.__next;return e.size=i,this.size-=i,e},o.merge=function(t){this.dirty=!0,this.tail.__next=t.head,t.head.__prev=this.tail,this.size+=t.size,this.tail=t.tail;for(var e=t.head;e;)e.batch=this,e=e.__next},o.growBatch=function(){var t=this.gl;1===this.size?this.dynamicSize=1:this.dynamicSize=1.5*this.size,this.verticies=new Float32Array(8*this.dynamicSize),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.verticies,t.DYNAMIC_DRAW),this.uvs=new Float32Array(8*this.dynamicSize),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvs,t.DYNAMIC_DRAW),this.dirtyUVS=!0,this.colors=new Float32Array(4*this.dynamicSize),t.bindBuffer(t.ARRAY_BUFFER,this.colorBuffer),t.bufferData(t.ARRAY_BUFFER,this.colors,t.DYNAMIC_DRAW),this.dirtyColors=!0,this.indices=new Uint16Array(6*this.dynamicSize);for(var e=0,i=this.indices.length/6;i>e;e++){var r=6*e,s=4*e;this.indices[r+0]=s+0,this.indices[r+1]=s+1,this.indices[r+2]=s+2,this.indices[r+3]=s+0,this.indices[r+4]=s+2,this.indices[r+5]=s+3}t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW)},o.refresh=function(){this.dynamicSize<this.size&&this.growBatch();for(var t,e,i=0,r=this.head;r;){t=8*i;var s=r.texture,n=s.frame,o=s.baseTexture.width,a=s.baseTexture.height;this.uvs[t+0]=n.x/o,this.uvs[t+1]=n.y/a,this.uvs[t+2]=(n.x+n.width)/o,this.uvs[t+3]=n.y/a,this.uvs[t+4]=(n.x+n.width)/o,this.uvs[t+5]=(n.y+n.height)/a,this.uvs[t+6]=n.x/o,this.uvs[t+7]=(n.y+n.height)/a,r.updateFrame=!1,e=4*i,this.colors[e]=this.colors[e+1]=this.colors[e+2]=this.colors[e+3]=r.worldAlpha,r=r.__next,i++}this.dirtyUVS=!0,this.dirtyColors=!0},o.update=function(){for(var t,e,i,r,n,o,a,h,l,u,c,f,d,p,v,g,m=0,x=this.head,b=this.verticies,y=this.uvs,_=this.colors;x;){if(x.vcount===s.visibleCount){if(e=x.texture.frame.width,i=x.texture.frame.height,r=x.anchor.x,n=x.anchor.y,o=e*(1-r),a=e*-r,h=i*(1-n),l=i*-n,u=8*m,t=x.worldTransform,c=t[0],f=t[3],d=t[1],p=t[4],v=t[2],g=t[5],b[u+0]=c*a+d*l+v,b[u+1]=p*l+f*a+g,b[u+2]=c*o+d*l+v,b[u+3]=p*l+f*o+g,b[u+4]=c*o+d*h+v,b[u+5]=p*h+f*o+g,b[u+6]=c*a+d*h+v,b[u+7]=p*h+f*a+g,x.updateFrame||x.texture.updateFrame){this.dirtyUVS=!0;var T=x.texture,A=T.frame,w=T.baseTexture.width,E=T.baseTexture.height;y[u+0]=A.x/w,y[u+1]=A.y/E,y[u+2]=(A.x+A.width)/w,y[u+3]=A.y/E,y[u+4]=(A.x+A.width)/w,y[u+5]=(A.y+A.height)/E,y[u+6]=A.x/w,y[u+7]=(A.y+A.height)/E,x.updateFrame=!1}if(x.cacheAlpha!==x.worldAlpha){x.cacheAlpha=x.worldAlpha;var S=4*m;_[S]=_[S+1]=_[S+2]=_[S+3]=x.worldAlpha,this.dirtyColors=!0}}else u=8*m,b[u+0]=b[u+1]=b[u+2]=b[u+3]=b[u+4]=b[u+5]=b[u+6]=b[u+7]=0;m++,x=x.__next}},o.render=function(t,e){if(t=t||0,arguments.length<2&&(e=this.size),this.dirty&&(this.refresh(),this.dirty=!1),this.size){this.update();var i=this.gl,r=s.defaultShader;i.bindBuffer(i.ARRAY_BUFFER,this.vertexBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,this.verticies),i.vertexAttribPointer(r.aVertexPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this.uvBuffer),this.dirtyUVS&&(this.dirtyUVS=!1,i.bufferSubData(i.ARRAY_BUFFER,0,this.uvs)),i.vertexAttribPointer(r.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.texture._glTexture),i.bindBuffer(i.ARRAY_BUFFER,this.colorBuffer),this.dirtyColors&&(this.dirtyColors=!1,i.bufferSubData(i.ARRAY_BUFFER,0,this.colors)),i.vertexAttribPointer(r.colorAttribute,1,i.FLOAT,!1,0,0),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var n=e-t;i.drawElements(i.TRIANGLES,6*n,i.UNSIGNED_SHORT,2*t*6)}};var a=[];r.restoreBatches=function(t){for(var e=0,i=a.length;i>e;e++)a[e].restoreLostContext(t)},r.getBatch=function(){return a.length?a.pop():new r(s.gl)},r.returnBatch=function(t){t.clean(),a.push(t)},e.exports=r},{"../../core/globals":10,"../../display/blendModes":16}],61:[function(t,e,i){"use strict";function r(t,e){var i=n.gl;this.frameBuffer=i.createFramebuffer(),this.texture=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.bindFramebuffer(i.FRAMEBUFFER,this.framebuffer),i.bindFramebuffer(i.FRAMEBUFFER,this.frameBuffer),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,this.texture,0),this.resize(t,e)}function s(t){this.transparent=t,this.filterStack=[],this.texturePool=[],this.offsetX=0,this.offsetY=0,this.initShaderBuffers()}var n=t("../../core/globals"),o=t("../../display/Sprite"),a=t("../../primitives/Graphics"),h=t("./PixiShader");r.prototype.resize=function(t,e){if(this.width!==t||this.height!==e){this.width=t,this.height=e;var i=n.gl;i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t,e,0,i.RGBA,i.UNSIGNED_BYTE,null)}};var l=s.prototype;l.begin=function(t,e){this.width=2*t.x,this.height=2*-t.y,this.buffer=e},l.pushFilter=function(t){var e=n.gl;this.filterStack.push(t);var i=t.filterPasses[0];this.offsetX+=t.target.filterArea.x,this.offsetY+=t.target.filterArea.y;var s=this.texturePool.pop();s?s.resize(this.width,this.height):s=new r(this.width,this.height),e.bindTexture(e.TEXTURE_2D,s.texture),this.getBounds(t.target);var o=t.target.filterArea,a=i.padding;o.x-=a,o.y-=a,o.width+=2*a,o.height+=2*a,o.x<0&&(o.x=0),o.width>this.width&&(o.width=this.width),o.y<0&&(o.y=0),o.height>this.height&&(o.height=this.height),e.bindFramebuffer(e.FRAMEBUFFER,s.frameBuffer),e.viewport(0,0,o.width,o.height),n.projection.x=o.width/2,n.projection.y=-o.height/2,n.offset.x=-o.x,n.offset.y=-o.y,e.uniform2f(n.defaultShader.projectionVector,o.width/2,-o.height/2),e.uniform2f(n.defaultShader.offsetVector,-o.x,-o.y),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),t._glFilterTexture=s},l.popFilter=function(){var t=n.gl,e=this.filterStack.pop(),i=e.target.filterArea,s=e._glFilterTexture;if(e.filterPasses.length>1){t.viewport(0,0,i.width,i.height),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=i.height,this.vertexArray[2]=i.width,this.vertexArray[3]=i.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=i.width,this.vertexArray[7]=0,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=i.width/this.width,this.uvArray[5]=i.height/this.height,this.uvArray[6]=i.width/this.width,this.uvArray[7]=i.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray);var o=s,a=this.texturePool.pop();a||(a=new r(this.width,this.height)),t.bindFramebuffer(t.FRAMEBUFFER,a.frameBuffer),t.clear(t.COLOR_BUFFER_BIT),t.disable(t.BLEND);for(var h=0;h<e.filterPasses.length-1;h++){var l=e.filterPasses[h];t.bindFramebuffer(t.FRAMEBUFFER,a.frameBuffer),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,o.texture),this.applyFilterPass(l,i,i.width,i.height);var u=o;o=a,a=u}t.enable(t.BLEND),s=o,this.texturePool.push(a)}var c=e.filterPasses[e.filterPasses.length-1];this.offsetX-=i.x,this.offsetY-=i.y;var f=this.width,d=this.height,p=0,v=0,g=this.buffer;if(0===this.filterStack.length)t.colorMask(!0,!0,!0,this.transparent);else{var m=this.filterStack[this.filterStack.length-1];i=m.target.filterArea,f=i.width,d=i.height,p=i.x,v=i.y,g=m._glFilterTexture.frameBuffer}n.projection.x=f/2,n.projection.y=-d/2,n.offset.x=p,n.offset.y=v,i=e.target.filterArea;var x=i.x-p,b=i.y-v;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=x,this.vertexArray[1]=b+i.height,this.vertexArray[2]=x+i.width,this.vertexArray[3]=b+i.height,this.vertexArray[4]=x,this.vertexArray[5]=b,this.vertexArray[6]=x+i.width,this.vertexArray[7]=b,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=i.width/this.width,this.uvArray[5]=i.height/this.height,this.uvArray[6]=i.width/this.width,this.uvArray[7]=i.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray),t.viewport(0,0,f,d),t.bindFramebuffer(t.FRAMEBUFFER,g),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,s.texture),this.applyFilterPass(c,i,f,d),t.useProgram(n.defaultShader.program),t.uniform2f(n.defaultShader.projectionVector,f/2,-d/2),t.uniform2f(n.defaultShader.offsetVector,-p,-v),this.texturePool.push(s),e._glFilterTexture=null},l.applyFilterPass=function(t,e,i,r){var s=n.gl,o=t.shader;o||(o=new h,o.fragmentSrc=t.fragmentSrc,o.uniforms=t.uniforms,o.init(),t.shader=o),s.useProgram(o.program),s.uniform2f(o.projectionVector,i/2,-r/2),s.uniform2f(o.offsetVector,0,0),t.uniforms.dimensions&&(t.uniforms.dimensions.value[0]=this.width,t.uniforms.dimensions.value[1]=this.height,t.uniforms.dimensions.value[2]=this.vertexArray[0],t.uniforms.dimensions.value[3]=this.vertexArray[5]),o.syncUniforms(),s.bindBuffer(s.ARRAY_BUFFER,this.vertexBuffer),s.vertexAttribPointer(o.aVertexPosition,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,this.uvBuffer),s.vertexAttribPointer(o.aTextureCoord,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,this.indexBuffer),s.drawElements(s.TRIANGLES,6,s.UNSIGNED_SHORT,0)},l.initShaderBuffers=function(){var t=n.gl;this.vertexBuffer=t.createBuffer(),this.uvBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.vertexArray=new Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),
t.bufferData(t.ARRAY_BUFFER,this.vertexArray,t.STATIC_DRAW),this.uvArray=new Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvArray,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),t.STATIC_DRAW)},l.getBounds=function(t){var e,i,r,s,n,h,l,u,c,f,d,p,v,g,m,x,b,y,_,T,A,w,E,S,C=t.first,R=t.last._iNext,F=-(1/0),L=-(1/0),B=1/0,D=1/0;do{if(C.visible)if(C instanceof o)i=C.texture.frame.width,r=C.texture.frame.height,s=C.anchor.x,n=C.anchor.y,h=i*(1-s),l=i*-s,u=r*(1-n),c=r*-n,f=!0;else if(C instanceof a){C.updateFilterBounds();var P=C.bounds;i=P.width,r=P.height,h=P.x,l=P.x+P.width,u=P.y,c=P.y+P.height,f=!0}f&&(e=C.worldTransform,d=e[0],p=e[3],v=e[1],g=e[4],m=e[2],x=e[5],b=d*l+v*c+m,A=g*c+p*l+x,y=d*h+v*c+m,w=g*c+p*h+x,_=d*h+v*u+m,E=g*u+p*h+x,T=d*l+v*u+m,S=g*u+p*l+x,B=B>b?b:B,B=B>y?y:B,B=B>_?_:B,B=B>T?T:B,D=D>A?A:D,D=D>w?w:D,D=D>E?E:D,D=D>S?S:D,F=b>F?b:F,F=y>F?y:F,F=_>F?_:F,F=T>F?T:F,L=A>L?A:L,L=w>L?w:L,L=E>L?E:L,L=S>L?S:L),f=!1,C=C._iNext}while(C!==R);t.filterArea.x=B,t.filterArea.y=D,t.filterArea.width=F-B,t.filterArea.height=L-D},e.exports=s},{"../../core/globals":10,"../../display/Sprite":14,"../../primitives/Graphics":54,"./PixiShader":57}],62:[function(t,e,i){"use strict";function r(t,e){this.gl=t,this.root=null,this.backgroundColor=void 0,this.transparent=void 0===e?!0:e,this.batchs=[],this.toRemove=[],this.filterManager=new h(this.transparent)}var s=t("../../core/globals"),n=t("./shaders"),o=t("./graphics"),a=t("./WebGLBatch"),h=t("./WebGLFilterManager"),l=t("../../geom/matrix").mat3,u=t("../../textures/BaseTexture"),c=t("../../extras/TilingSprite"),f=t("../../extras/Strip"),d=t("../../primitives/Graphics"),p=t("../../filters/FilterBlock"),v=t("../../display/Sprite"),g=t("../../extras/CustomRenderable"),m=r.prototype;m.setRenderable=function(t){this.root&&this.removeDisplayObjectAndChildren(this.root),t.worldVisible=t.visible,this.root=t,this.addDisplayObjectAndChildren(t)},m.render=function(t,e){var i=this.gl;r.updateTextures(i),i.uniform2f(s.defaultShader.projectionVector,t.x,t.y),this.filterManager.begin(t,e),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA);for(var n,o=0;o<this.batchs.length;o++)n=this.batchs[o],n instanceof a?this.batchs[o].render():this.renderSpecial(n,t)},m.handleFilter=function(){},m.renderSpecific=function(t,e,i){var n=this.gl;r.updateTextures(n),n.uniform2f(s.defaultShader.projectionVector,e.x,e.y),this.filterManager.begin(e,i);for(var o,h,l,u,c,f,d=t.first;d._iNext&&(!d.renderable||!d.__renderGroup);)d=d._iNext;var p=d.batch;if(d instanceof v)if(p=d.batch,f=p.head,f===d)o=0;else for(o=1;f.__next!==d;)o++,f=f.__next;else p=d;for(var g=t.last;g._iPrev&&(!g.renderable||!g.__renderGroup);)g=g._iNext;if(g instanceof v)if(c=g.batch,f=c.head,f===g)l=0;else for(l=1;f.__next!==g;)l++,f=f.__next;else c=g;if(p===c)return void(p instanceof a?p.render(o,l+1):this.renderSpecial(p,e));h=this.batchs.indexOf(p),u=this.batchs.indexOf(c),p instanceof a?p.render(o):this.renderSpecial(p,e);for(var m,x=h+1;u>x;x++)m=this.batchs[x],m instanceof a?this.batchs[x].render():this.renderSpecial(m,e);c instanceof a?c.render(0,l+1):this.renderSpecial(c,e)},m.renderSpecial=function(t,e){var i=t.vcount===s.visibleCount;t instanceof c?i&&this.renderTilingSprite(t,e):t instanceof f?i&&this.renderStrip(t,e):t instanceof g?i&&t.renderWebGL(this,e):t instanceof d?i&&t.renderable&&o.renderGraphics(t,e):t instanceof p&&this.handleFilterBlock(t,e)};var x=[];m.handleFilterBlock=function(t,e){var i=s.gl;if(t.open)t.data instanceof Array?this.filterManager.pushFilter(t):(x.push(t),i.enable(i.STENCIL_TEST),i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.ALWAYS,1,1),i.stencilOp(i.KEEP,i.KEEP,i.INCR),o.renderGraphics(t.data,e),i.colorMask(!0,!0,!0,!0),i.stencilFunc(i.NOTEQUAL,0,x.length),i.stencilOp(i.KEEP,i.KEEP,i.KEEP));else if(t.data instanceof Array)this.filterManager.popFilter();else{var r=x.pop(t);r&&(i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.ALWAYS,1,1),i.stencilOp(i.KEEP,i.KEEP,i.DECR),o.renderGraphics(r.data,e),i.colorMask(!0,!0,!0,!0),i.stencilFunc(i.NOTEQUAL,0,x.length),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)),i.disable(i.STENCIL_TEST)}},m.updateTexture=function(t){this.removeObject(t);for(var e=t.first;e!==this.root&&(e=e._iPrev,!e.renderable||!e.__renderGroup););for(var i=t.last;i._iNext&&(i=i._iNext,!i.renderable||!i.__renderGroup););this.insertObject(t,e,i)},m.addFilterBlocks=function(t,e){t.__renderGroup=this,e.__renderGroup=this;for(var i=t;i!==this.root.first&&(i=i._iPrev,!i.renderable||!i.__renderGroup););this.insertAfter(t,i);for(var r=e;r!==this.root.first&&(r=r._iPrev,!r.renderable||!r.__renderGroup););this.insertAfter(e,r)},m.removeFilterBlocks=function(t,e){this.removeObject(t),this.removeObject(e)},m.addDisplayObjectAndChildren=function(t){t.__renderGroup&&t.__renderGroup.removeDisplayObjectAndChildren(t);for(var e=t.first;e!==this.root.first&&(e=e._iPrev,!e.renderable||!e.__renderGroup););for(var i=t.last;i._iNext&&(i=i._iNext,!i.renderable||!i.__renderGroup););var r=t.first,s=t.last._iNext;do r.__renderGroup=this,r.renderable&&(this.insertObject(r,e,i),e=r),r=r._iNext;while(r!==s)},m.removeDisplayObjectAndChildren=function(t){if(t.__renderGroup===this)do t.__renderGroup=null,t.renderable&&this.removeObject(t),t=t._iNext;while(t)},m.insertObject=function(t,e,i){var r,s,n=e,o=i;if(t instanceof v){var h,l;if(n instanceof v){if(h=n.batch,h&&h.texture===t.texture.baseTexture&&h.blendMode===t.blendMode)return void h.insertAfter(t,n)}else h=n;if(o)if(o instanceof v){if(l=o.batch){if(l.texture===t.texture.baseTexture&&l.blendMode===t.blendMode)return void l.insertBefore(t,o);if(l===h){var u=h.split(o);return r=a.getBatch(),s=this.batchs.indexOf(h),r.init(t),void this.batchs.splice(s+1,0,r,u)}}}else l=o;return r=a.getBatch(),r.init(t),void(h?(s=this.batchs.indexOf(h),this.batchs.splice(s+1,0,r)):this.batchs.push(r))}t instanceof c?this.initTilingSprite(t):t instanceof f&&this.initStrip(t),this.insertAfter(t,n)},m.insertAfter=function(t,e){var i,r,s;e instanceof v?(i=e.batch,i?i.tail===e?(s=this.batchs.indexOf(i),this.batchs.splice(s+1,0,t)):(r=i.split(e.__next),s=this.batchs.indexOf(i),this.batchs.splice(s+1,0,t,r)):this.batchs.push(t)):(s=this.batchs.indexOf(e),this.batchs.splice(s+1,0,t))},m.removeObject=function(t){var e,i;if(t instanceof v){var r=t.batch;if(!r)return;r.remove(t),r.size||(e=r)}else e=t;if(e){if(i=this.batchs.indexOf(e),-1===i)return;if(0===i||i===this.batchs.length-1)return this.batchs.splice(i,1),void(e instanceof a&&a.returnBatch(e));if(this.batchs[i-1]instanceof a&&this.batchs[i+1]instanceof a&&this.batchs[i-1].texture===this.batchs[i+1].texture&&this.batchs[i-1].blendMode===this.batchs[i+1].blendMode)return this.batchs[i-1].merge(this.batchs[i+1]),e instanceof a&&a.returnBatch(e),a.returnBatch(this.batchs[i+1]),void this.batchs.splice(i,2);this.batchs.splice(i,1),e instanceof a&&a.returnBatch(e)}},m.initTilingSprite=function(t){var e=this.gl;t.verticies=new Float32Array([0,0,t.width,0,t.width,t.height,0,t.height]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.colors=new Float32Array([1,1,1,1]),t.indices=new Uint16Array([0,1,3,2]),t._vertexBuffer=e.createBuffer(),t._indexBuffer=e.createBuffer(),t._uvBuffer=e.createBuffer(),t._colorBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,t.verticies,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,t._uvBuffer),e.bufferData(e.ARRAY_BUFFER,t.uvs,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,t._colorBuffer),e.bufferData(e.ARRAY_BUFFER,t.colors,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t.indices,e.STATIC_DRAW),t.texture.baseTexture._glTexture?(e.bindTexture(e.TEXTURE_2D,t.texture.baseTexture._glTexture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),t.texture.baseTexture._powerOf2=!0):t.texture.baseTexture._powerOf2=!0},m.renderStrip=function(t,e){var i=this.gl;n.activateStripShader();var r=s.stripShader,o=l.clone(t.worldTransform);l.transpose(o),i.uniformMatrix3fv(r.translationMatrix,!1,o),i.uniform2f(r.projectionVector,e.x,e.y),i.uniform2f(r.offsetVector,-s.offset.x,-s.offset.y),i.uniform1f(r.alpha,t.worldAlpha),t.dirty?(t.dirty=!1,i.bindBuffer(i.ARRAY_BUFFER,t._vertexBuffer),i.bufferData(i.ARRAY_BUFFER,t.verticies,i.STATIC_DRAW),i.vertexAttribPointer(r.aVertexPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,t._uvBuffer),i.bufferData(i.ARRAY_BUFFER,t.uvs,i.STATIC_DRAW),i.vertexAttribPointer(r.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t.texture.baseTexture._glTexture),i.bindBuffer(i.ARRAY_BUFFER,t._colorBuffer),i.bufferData(i.ARRAY_BUFFER,t.colors,i.STATIC_DRAW),i.vertexAttribPointer(r.colorAttribute,1,i.FLOAT,!1,0,0),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t._indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t.indices,i.STATIC_DRAW)):(i.bindBuffer(i.ARRAY_BUFFER,t._vertexBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,t.verticies),i.vertexAttribPointer(r.aVertexPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,t._uvBuffer),i.vertexAttribPointer(r.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t.texture.baseTexture._glTexture),i.bindBuffer(i.ARRAY_BUFFER,t._colorBuffer),i.vertexAttribPointer(r.colorAttribute,1,i.FLOAT,!1,0,0),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t._indexBuffer)),i.drawElements(i.TRIANGLE_STRIP,t.indices.length,i.UNSIGNED_SHORT,0),n.deactivateStripShader()},m.renderTilingSprite=function(t,e){var i=this.gl,r=t.tilePosition,s=t.tileScale,n=r.x/t.texture.baseTexture.width,o=r.y/t.texture.baseTexture.height,a=t.width/t.texture.baseTexture.width/s.x,h=t.height/t.texture.baseTexture.height/s.y;t.uvs[0]=0-n,t.uvs[1]=0-o,t.uvs[2]=1*a-n,t.uvs[3]=0-o,t.uvs[4]=1*a-n,t.uvs[5]=1*h-o,t.uvs[6]=0-n,t.uvs[7]=1*h-o,i.bindBuffer(i.ARRAY_BUFFER,t._uvBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,t.uvs),this.renderStrip(t,e)},m.initStrip=function(t){var e=this.gl;t._vertexBuffer=e.createBuffer(),t._indexBuffer=e.createBuffer(),t._uvBuffer=e.createBuffer(),t._colorBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,t.verticies,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,t._uvBuffer),e.bufferData(e.ARRAY_BUFFER,t.uvs,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,t._colorBuffer),e.bufferData(e.ARRAY_BUFFER,t.colors,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t.indices,e.STATIC_DRAW)},r.updateTexture=function(t,e){e._glTexture||(e._glTexture=t.createTexture()),e.hasLoaded&&(t.bindTexture(t.TEXTURE_2D,e._glTexture),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e.source),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e.scaleMode===u.SCALE_MODE.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e.scaleMode===u.SCALE_MODE.LINEAR?t.LINEAR:t.NEAREST),e._powerOf2?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),t.bindTexture(t.TEXTURE_2D,null))},r.destroyTexture=function(t,e){e._glTexture&&(e._glTexture=t.createTexture(),t.deleteTexture(t.TEXTURE_2D,e._glTexture))},r.updateTextures=function(t){for(var e=0,i=s.texturesToUpdate.length;i>e;e++)r.updateTexture(t,s.texturesToUpdate[e]);for(e=0,i=s.texturesToDestroy.length;i>e;e++)r.destroyTexture(t,s.texturesToDestroy[e]);s.texturesToUpdate=[],s.texturesToDestroy=[]},e.exports=r},{"../../core/globals":10,"../../display/Sprite":14,"../../extras/CustomRenderable":18,"../../extras/Strip":21,"../../extras/TilingSprite":22,"../../filters/FilterBlock":32,"../../geom/matrix":45,"../../primitives/Graphics":54,"../../textures/BaseTexture":69,"./WebGLBatch":60,"./WebGLFilterManager":61,"./graphics":65,"./shaders":66}],63:[function(t,e,i){"use strict";function r(t,e,i,r,u){var c;this.transparent=!!r,this.width=t||800,this.height=e||600,this.view=i||s.createCanvas(),this.view.width=this.width,this.view.height=this.height;var f=this;this.view.addEventListener("webglcontextlost",function(t){f.handleContextLost(t)},!1),this.view.addEventListener("webglcontextrestored",function(t){f.handleContextRestored(t)},!1),this.batchs=[];var d={alpha:this.transparent,antialias:!!u,premultipliedAlpha:!1,stencil:!0};try{c=this.view.getContext("experimental-webgl",d)}catch(p){try{c=this.view.getContext("webgl",d)}catch(v){throw new Error(" This browser does not support webGL. Try using the canvas renderer"+this)}}this.gl=n.gl=c,o.initDefaultShaders(),c.useProgram(n.defaultShader.program),this.batch=new a(c),c.disable(c.DEPTH_TEST),c.disable(c.CULL_FACE),c.enable(c.BLEND),c.colorMask(!0,!0,!0,this.transparent),this.projection=n.projection=new l(400,300),this.offset=n.offset=new l(0,0),this.resize(this.width,this.height),this.contextLost=!1,this.stageRenderGroup=new h(this.gl,this.transparent)}var s=t("../../platform"),n=t("../../core/globals"),o=t("./shaders"),a=t("./WebGLBatch"),h=t("./WebGLRenderGroup"),l=t("../../geom/Point"),u=t("../../textures/Texture"),c=r.prototype;c.render=function(t){if(!this.contextLost){this.__stage!==t&&(this.__stage=t,this.stageRenderGroup.setRenderable(t));var e=this.gl;if(h.updateTextures(e),n.visibleCount++,t.updateTransform(),e.colorMask(!0,!0,!0,this.transparent),e.viewport(0,0,this.width,this.height),e.bindFramebuffer(e.FRAMEBUFFER,null),e.clearColor(t.backgroundColorSplit[0],t.backgroundColorSplit[1],t.backgroundColorSplit[2],!this.transparent),e.clear(e.COLOR_BUFFER_BIT),this.stageRenderGroup.backgroundColor=t.backgroundColorSplit,this.projection.x=this.width/2,this.projection.y=-this.height/2,this.stageRenderGroup.render(this.projection),t.interactive&&(t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this))),u.frameUpdates.length>0){for(var i=0,r=u.frameUpdates.length;r>i;i++)u.frameUpdates[i].updateFrame=!1;u.frameUpdates=[]}}},c.resize=function(t,e){this.width=t,this.height=e,this.view.width=t,this.view.height=e,this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2,this.projection.y=-this.height/2},c.handleContextLost=function(t){t.preventDefault(),this.contextLost=!0},c.handleContextRestored=function(){var t=this.gl=this.view.getContext("experimental-webgl",{alpha:!0});this.initShaders();for(var e in u.cache){var i=u.cache[e].baseTexture;i._glTexture=null,h.updateTexture(t,i)}for(var r=0,s=this.batchs.length;s>r;r++)this.batchs[r].restoreLostContext(t),this.batchs[r].dirty=!0;a.restoreBatches(t),this.contextLost=!1},e.exports=r},{"../../core/globals":10,"../../geom/Point":42,"../../platform":53,"../../textures/Texture":71,"./WebGLBatch":60,"./WebGLRenderGroup":62,"./shaders":66}],64:[function(t,e,i){"use strict";var r=t("../../platform");i.shader=function(t,e,i){var s=e.join("\n"),n=t.createShader(i);return t.shaderSource(n,s),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(r.console&&r.console.error(t.getShaderInfoLog(n)),null)},i.program=function(t,e,s){var n=i.shader(t,s,t.FRAGMENT_SHADER),o=i.shader(t,e,t.VERTEX_SHADER),a=t.createProgram();return t.attachShader(a,o),t.attachShader(a,n),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)?a:(r.console&&r.console.error("Could not initialise shaders"),null)}},{"../../platform":53}],65:[function(t,e,i){"use strict";var r=t("./shaders"),s=t("../../core/globals"),n=t("../../geom/matrix").mat3,o=t("../../utils/color").hex2rgb,a=t("../../utils/Polyk").triangulate,h=t("../../geom/Point"),l=t("../../primitives/Graphics");i.renderGraphics=function(t,e){var o=s.gl;t._webGL||(t._webGL={points:[],indices:[],lastIndex:0,buffer:o.createBuffer(),indexBuffer:o.createBuffer()}),t.dirty&&(t.dirty=!1,t.clearDirty&&(t.clearDirty=!1,t._webGL.lastIndex=0,t._webGL.points=[],t._webGL.indices=[]),i.updateGraphics(t)),r.activatePrimitiveShader();var a=n.clone(t.worldTransform);n.transpose(a),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.uniformMatrix3fv(s.primitiveShader.translationMatrix,!1,a),o.uniform2f(s.primitiveShader.projectionVector,e.x,-e.y),o.uniform2f(s.primitiveShader.offsetVector,-s.offset.x,-s.offset.y),o.uniform1f(s.primitiveShader.alpha,t.worldAlpha),o.bindBuffer(o.ARRAY_BUFFER,t._webGL.buffer),o.vertexAttribPointer(s.primitiveShader.aVertexPosition,2,o.FLOAT,!1,24,0),o.vertexAttribPointer(s.primitiveShader.colorAttribute,4,o.FLOAT,!1,24,8),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,t._webGL.indexBuffer),o.drawElements(o.TRIANGLE_STRIP,t._webGL.indices.length,o.UNSIGNED_SHORT,0),r.deactivatePrimitiveShader()},i.updateGraphics=function(t){for(var e=t._webGL.lastIndex;e<t.graphicsData.length;e++){var r=t.graphicsData[e];r.type===l.POLY?(r.fill&&r.points.length>3&&i.buildPoly(r,t._webGL),r.lineWidth>0&&i.buildLine(r,t._webGL)):r.type===l.RECT?i.buildRectangle(r,t._webGL):r.type===l.CIRC||r.type===l.ELIP,i.buildCircle(r,t._webGL)}t._webGL.lastIndex=t.graphicsData.length;var n=s.gl;t._webGL.glPoints=new Float32Array(t._webGL.points),n.bindBuffer(n.ARRAY_BUFFER,t._webGL.buffer),n.bufferData(n.ARRAY_BUFFER,t._webGL.glPoints,n.STATIC_DRAW),t._webGL.glIndicies=new Uint16Array(t._webGL.indices),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t._webGL.indexBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t._webGL.glIndicies,n.STATIC_DRAW)},i.buildRectangle=function(t,e){var r=t.points,s=r[0],n=r[1],a=r[2],h=r[3];if(t.fill){var l=o(t.fillColor),u=t.fillAlpha,c=l[0]*u,f=l[1]*u,d=l[2]*u,p=e.points,v=e.indices,g=p.length/6;p.push(s,n),p.push(c,f,d,u),p.push(s+a,n),p.push(c,f,d,u),p.push(s,n+h),p.push(c,f,d,u),p.push(s+a,n+h),p.push(c,f,d,u),v.push(g,g,g+1,g+2,g+3,g+3)}t.lineWidth&&(t.points=[s,n,s+a,n,s+a,n+h,s,n+h,s,n],i.buildLine(t,e))},i.buildCircle=function(t,e){var r=t.points,s=r[0],n=r[1],a=r[2],h=r[3],l=40,u=2*Math.PI/l,c=0;if(t.fill){var f=o(t.fillColor),d=t.fillAlpha,p=f[0]*d,v=f[1]*d,g=f[2]*d,m=e.points,x=e.indices,b=m.length/6;for(x.push(b),c=0;l+1>c;c++)m.push(s,n,p,v,g,d),m.push(s+Math.sin(u*c)*a,n+Math.cos(u*c)*h,p,v,g,d),x.push(b++,b++);x.push(b-1)}if(t.lineWidth){for(t.points=[],c=0;l+1>c;c++)t.points.push(s+Math.sin(u*c)*a,n+Math.cos(u*c)*h);i.buildLine(t,e)}},i.buildLine=function(t,e){var i=0,r=t.points;if(0!==r.length){if(t.lineWidth%2)for(i=0;i<r.length;i++)r[i]+=.5;var s=new h(r[0],r[1]),n=new h(r[r.length-2],r[r.length-1]);if(s.x===n.x&&s.y===n.y){r.pop(),r.pop(),n=new h(r[r.length-2],r[r.length-1]);var a=n.x+.5*(s.x-n.x),l=n.y+.5*(s.y-n.y);r.unshift(a,l),r.push(a,l)}var u,c,f,d,p,v,g,m,x,b,y,_,T,A,w,E,S,C,R,F,L,B,D,P=e.points,M=e.indices,O=r.length/2,I=r.length,U=P.length/6,k=t.lineWidth/2,N=o(t.lineColor),j=t.lineAlpha,G=N[0]*j,Y=N[1]*j,W=N[2]*j;for(f=r[0],d=r[1],p=r[2],v=r[3],x=-(d-v),b=f-p,D=Math.sqrt(x*x+b*b),x/=D,b/=D,x*=k,b*=k,P.push(f-x,d-b,G,Y,W,j),P.push(f+x,d+b,G,Y,W,j),i=1;O-1>i;i++)f=r[2*(i-1)],d=r[2*(i-1)+1],p=r[2*i],v=r[2*i+1],g=r[2*(i+1)],m=r[2*(i+1)+1],x=-(d-v),b=f-p,D=Math.sqrt(x*x+b*b),x/=D,b/=D,x*=k,b*=k,y=-(v-m),_=p-g,D=Math.sqrt(y*y+_*_),y/=D,_/=D,y*=k,_*=k,w=-b+d-(-b+v),E=-x+p-(-x+f),S=(-x+f)*(-b+v)-(-x+p)*(-b+d),C=-_+m-(-_+v),R=-y+p-(-y+g),F=(-y+g)*(-_+v)-(-y+p)*(-_+m),L=w*R-C*E,Math.abs(L)<.1?(L+=10.1,P.push(p-x,v-b,G,Y,W,j),P.push(p+x,v+b,G,Y,W,j)):(u=(E*F-R*S)/L,c=(C*S-w*F)/L,B=(u-p)*(u-p)+(c-v)+(c-v),B>19600?(T=x-y,A=b-_,D=Math.sqrt(T*T+A*A),T/=D,A/=D,T*=k,A*=k,P.push(p-T,v-A),P.push(G,Y,W,j),P.push(p+T,v+A),P.push(G,Y,W,j),P.push(p-T,v-A),P.push(G,Y,W,j),I++):(P.push(u,c),P.push(G,Y,W,j),P.push(p-(u-p),v-(c-v)),P.push(G,Y,W,j)));for(f=r[2*(O-2)],d=r[2*(O-2)+1],p=r[2*(O-1)],v=r[2*(O-1)+1],x=-(d-v),b=f-p,D=Math.sqrt(x*x+b*b),x/=D,b/=D,x*=k,b*=k,P.push(p-x,v-b),P.push(G,Y,W,j),P.push(p+x,v+b),P.push(G,Y,W,j),M.push(U),i=0;I>i;i++)M.push(U++);M.push(U-1)}},i.buildPoly=function(t,e){var i=t.points;if(!(i.length<6)){var r=e.points,s=e.indices,n=i.length/2,h=o(t.fillColor),l=t.fillAlpha,u=h[0]*l,c=h[1]*l,f=h[2]*l,d=a(i),p=r.length/6,v=0;for(v=0;v<d.length;v+=3)s.push(d[v]+p),s.push(d[v]+p),s.push(d[v+1]+p),s.push(d[v+2]+p),s.push(d[v+2]+p);for(v=0;n>v;v++)r.push(i[2*v],i[2*v+1],u,c,f,l)}}},{"../../core/globals":10,"../../geom/Point":42,"../../geom/matrix":45,"../../primitives/Graphics":54,"../../utils/Polyk":72,"../../utils/color":74,"./shaders":66}],66:[function(t,e,i){"use strict";var r=t("../../core/globals"),s=t("./PrimitiveShader"),n=t("./StripShader"),o=t("./PixiShader");i.initDefaultShaders=function(){r.primitiveShader=new s,r.primitiveShader.init(),r.stripShader=new n,r.stripShader.init(),r.defaultShader=new o,r.defaultShader.init();var t=r.gl,e=r.defaultShader.program;t.useProgram(e),t.enableVertexAttribArray(r.defaultShader.aVertexPosition),t.enableVertexAttribArray(r.defaultShader.colorAttribute),t.enableVertexAttribArray(r.defaultShader.aTextureCoord)},i.activatePrimitiveShader=function(){var t=r.gl;t.useProgram(r.primitiveShader.program),t.disableVertexAttribArray(r.defaultShader.aVertexPosition),t.disableVertexAttribArray(r.defaultShader.colorAttribute),t.disableVertexAttribArray(r.defaultShader.aTextureCoord),t.enableVertexAttribArray(r.primitiveShader.aVertexPosition),t.enableVertexAttribArray(r.primitiveShader.colorAttribute)},i.deactivatePrimitiveShader=function(){var t=r.gl;t.useProgram(r.defaultShader.program),t.disableVertexAttribArray(r.primitiveShader.aVertexPosition),t.disableVertexAttribArray(r.primitiveShader.colorAttribute),t.enableVertexAttribArray(r.defaultShader.aVertexPosition),t.enableVertexAttribArray(r.defaultShader.colorAttribute),t.enableVertexAttribArray(r.defaultShader.aTextureCoord)},i.activateStripShader=function(){var t=r.gl;t.useProgram(r.stripShader.program)},i.deactivateStripShader=function(){var t=r.gl;t.useProgram(r.defaultShader.program)}},{"../../core/globals":10,"./PixiShader":57,"./PrimitiveShader":58,"./StripShader":59}],67:[function(t,e,i){"use strict";function r(t,e){s.call(this),this.setText(t),this.setStyle(e),this.updateText(),this.dirty=!1}var s=t("../display/DisplayObjectContainer"),n=t("../display/Sprite"),o=t("../geom/Point"),a=r.prototype=Object.create(s.prototype,{constructor:{value:r}});a.setText=function(t){this.text=t||" ",this.dirty=!0},a.setStyle=function(t){t=t||{},t.align=t.align||"left",this.style=t;var e=t.font.split(" ");this.fontName=e[e.length-1],this.fontSize=e.length>=2?parseInt(e[e.length-2],10):r.fonts[this.fontName].size,this.dirty=!0},a.updateText=function(){for(var t=r.fonts[this.fontName],e=new o,i=null,s=[],a=0,h=[],l=0,u=this.fontSize/t.size,c=0;c<this.text.length;c++){var f=this.text.charCodeAt(c);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(c)))h.push(e.x),a=Math.max(a,e.x),l++,e.x=0,e.y+=t.lineHeight,i=null;else{var d=t.chars[f];d&&(i&&d[i]&&(e.x+=d.kerning[i]),s.push({texture:d.texture,line:l,charCode:f,position:new o(e.x+d.xOffset,e.y+d.yOffset)}),e.x+=d.xAdvance,i=f)}}h.push(e.x),a=Math.max(a,e.x);var p=[];for(c=0;l>=c;c++){var v=0;"right"===this.style.align?v=a-h[c]:"center"===this.style.align&&(v=(a-h[c])/2),p.push(v)}for(c=0;c<s.length;c++){var g=new n(s[c].texture);g.position.x=(s[c].position.x+p[s[c].line])*u,g.position.y=s[c].position.y*u,g.scale.x=g.scale.y=u,this.addChild(g)}this.width=a*u,this.height=(e.y+t.lineHeight)*u},a.updateTransform=function(){if(this.dirty){for(;this.children.length>0;)this.removeChild(this.getChildAt(0));this.updateText(),this.dirty=!1}s.prototype.updateTransform.call(this)},r.fonts={},e.exports=r},{"../display/DisplayObjectContainer":12,"../display/Sprite":14,"../geom/Point":42}],68:[function(t,e,i){"use strict";function r(t,e){this.canvas=s.createCanvas(),this.context=this.canvas.getContext("2d"),a.call(this,h.fromCanvas(this.canvas)),this.setText(t),this.setStyle(e),this.updateText(),this.dirty=!1}var s=t("../platform"),n=t("../core/globals"),o=t("../geom/Point"),a=t("../display/Sprite"),h=t("../textures/Texture"),l=r.prototype=Object.create(a.prototype,{constructor:{value:r}});l.setStyle=function(t){t=t||{},t.font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,this.style=t,this.dirty=!0},l.setText=function(t){this.text=t.toString()||" ",this.dirty=!0},l.updateText=function(){this.context.font=this.style.font;var t=this.text;this.style.wordWrap&&(t=this.wordWrap(this.text));for(var e=t.split(/(?:\r\n|\r|\n)/),i=[],r=0,s=0;s<e.length;s++){var n=this.context.measureText(e[s]).width;i[s]=n,r=Math.max(r,n)}this.canvas.width=r+this.style.strokeThickness;var a=this.determineFontHeight("font: "+this.style.font+";")+this.style.strokeThickness;for(this.canvas.height=a*e.length,this.context.fillStyle=this.style.fill,this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="top",s=0;s<e.length;s++){var h=new o(this.style.strokeThickness/2,this.style.strokeThickness/2+s*a);"right"===this.style.align?h.x+=r-i[s]:"center"===this.style.align&&(h.x+=(r-i[s])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(e[s],h.x,h.y),this.style.fill&&this.context.fillText(e[s],h.x,h.y)}this.updateTexture()},l.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.frame.width=this.canvas.width,this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height,n.texturesToUpdate.push(this.texture.baseTexture)},l.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),a.prototype.updateTransform.call(this)},l.determineFontHeight=function(t){var e=r.heightCache[t];if(!e){var i=s.document.getElementsByTagName("body")[0],n=s.document.createElement("div"),o=s.document.createTextNode("M");n.appendChild(o),n.setAttribute("style",t+";position:absolute;top:0;left:0"),i.appendChild(n),e=n.offsetHeight,r.heightCache[t]=e,i.removeChild(n)}return e},l.wordWrap=function(t){for(var e="",i=t.split("\n"),r=0;r<i.length;r++){for(var s=this.style.wordWrapWidth,n=i[r].split(" "),o=0;o<n.length;o++){var a=this.context.measureText(n[o]).width,h=a+this.context.measureText(" ").width;h>s?(o>0&&(e+="\n"),e+=n[o]+" ",s=this.style.wordWrapWidth-a):(s-=h,e+=n[o]+" ")}e+="\n"}return e},l.destroy=function(t){t&&this.texture.destroy()},r.heightCache={},e.exports=r},{"../core/globals":10,"../display/Sprite":14,"../geom/Point":42,"../platform":53,"../textures/Texture":71}],69:[function(t,e,i){"use strict";function r(t,e){if(o.call(this),this.width=100,this.height=100,this.scaleMode=e||r.SCALE_MODE.DEFAULT,this.hasLoaded=!1,this.source=t,t){if("complete"in this.source)if(this.source.complete)this.hasLoaded=!0,this.width=this.source.width,this.height=this.source.height,n.texturesToUpdate.push(this);else{var i=this;this.source.onload=function(){i.hasLoaded=!0,i.width=i.source.width,i.height=i.source.height,n.texturesToUpdate.push(i),i.dispatchEvent({type:"loaded",content:i})}}else this.hasLoaded=!0,this.width=this.source.width,this.height=this.source.height,n.texturesToUpdate.push(this);this.imageUrl=null,this._powerOf2=!1}}var s=t("../platform"),n=t("../core/globals"),o=t("../events/EventTarget"),a={},h=r.prototype;h.destroy=function(){this.source.src&&(this.imageUrl in a&&delete a[this.imageUrl],this.imageUrl=null,this.source.src=null),this.source=null,n.texturesToDestroy.push(this)},h.updateSourceImage=function(t){this.hasLoaded=!1,this.source.src=null,this.source.src=t},r.fromImage=function(t,e,i){var n=a[t];if(!n){var o=new s.createImage;e&&(o.crossOrigin=""),o.src=t,n=new r(o,i),n.imageUrl=t,a[t]=n}return n},r.SCALE_MODE={DEFAULT:0,LINEAR:0,NEAREST:1},e.exports=r},{"../core/globals":10,"../events/EventTarget":17,"../platform":53}],70:[function(t,e,i){"use strict";function r(t,e){u.call(this),this.width=t||100,this.height=e||100,this.identityMatrix=n.create(),this.frame=new l(0,0,this.width,this.height),s.gl?this.initWebGL():this.initCanvas()}var s=t("../core/globals"),n=t("../geom/matrix").mat3,o=t("./Texture"),a=t("./BaseTexture"),h=t("../geom/Point"),l=t("../geom/Rectangle"),u=t("../events/EventTarget"),c=t("../renderers/canvas/CanvasRenderer"),f=t("../renderers/webgl/WebGLRenderGroup"),d=r.prototype=Object.create(o.prototype,{constructor:{value:r}});d.initWebGL=function(){var t=s.gl;this.glFramebuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.glFramebuffer),this.glFramebuffer.width=this.width,this.glFramebuffer.height=this.height,this.baseTexture=new a,this.baseTexture.width=this.width,this.baseTexture.height=this.height,this.baseTexture._glTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.baseTexture._glTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.baseTexture.isRender=!0,t.bindFramebuffer(t.FRAMEBUFFER,this.glFramebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.baseTexture._glTexture,0),this.projection=new h(this.width/2,-this.height/2),this.render=this.renderWebGL},d.resize=function(t,e){if(this.width=t,this.height=e,s.gl){this.projection.x=this.width/2,this.projection.y=-this.height/2;var i=s.gl;i.bindTexture(i.TEXTURE_2D,this.baseTexture._glTexture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,this.width,this.height,0,i.RGBA,i.UNSIGNED_BYTE,null)}else this.frame.width=this.width,this.frame.height=this.height,this.renderer.resize(this.width,this.height)},d.initCanvas=function(){this.renderer=new c(this.width,this.height,null,0),this.baseTexture=new a(this.renderer.view),this.frame=new l(0,0,this.width,this.height),this.render=this.renderCanvas},d.renderWebGL=function(t,e,i){var r=s.gl;r.colorMask(!0,!0,!0,!0),r.viewport(0,0,this.width,this.height),r.bindFramebuffer(r.FRAMEBUFFER,this.glFramebuffer),i&&(r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT));var o=t.children,a=t.worldTransform;t.worldTransform=n.create(),t.worldTransform[4]=-1,t.worldTransform[5]=-2*this.projection.y,e&&(t.worldTransform[2]=e.x,t.worldTransform[5]-=e.y),s.visibleCount++,t.vcount=s.visibleCount;for(var h=0,l=o.length;l>h;h++)o[h].updateTransform();var u=t.__renderGroup;u?t===u.root?u.render(this.projection,this.glFramebuffer):u.renderSpecific(t,this.projection,this.glFramebuffer):(this.renderGroup||(this.renderGroup=new f(r)),this.renderGroup.setRenderable(t),this.renderGroup.render(this.projection,this.glFramebuffer)),t.worldTransform=a},d.renderCanvas=function(t,e,i){var r=t.children;t.worldTransform=n.create(),e&&(t.worldTransform[2]=e.x,t.worldTransform[5]=e.y);for(var s=0,o=r.length;o>s;s++)r[s].updateTransform();i&&this.renderer.context.clearRect(0,0,this.width,this.height),this.renderer.renderDisplayObject(t),this.renderer.context.setTransform(1,0,0,1,0,0)},e.exports=r},{"../core/globals":10,"../events/EventTarget":17,"../geom/Point":42,"../geom/Rectangle":44,"../geom/matrix":45,"../renderers/canvas/CanvasRenderer":55,"../renderers/webgl/WebGLRenderGroup":62,"./BaseTexture":69,"./Texture":71}],71:[function(t,e,i){"use strict";function r(t,e){if(a.call(this),e||(this.noFrame=!0,e=new o(0,0,1,1)),t instanceof r&&(t=t.baseTexture),this.baseTexture=t,this.frame=e,this.trim=new n,this.scope=this,t.hasLoaded)this.noFrame&&(e=new o(0,0,t.width,t.height)),this.setFrame(e);else{var i=this;t.addEventListener("loaded",function(){i.onBaseTextureLoaded()})}}var s=t("./BaseTexture"),n=t("../geom/Point"),o=t("../geom/Rectangle"),a=t("../events/EventTarget"),h=r.prototype;h.onBaseTextureLoaded=function(){var t=this.baseTexture;t.removeEventListener("loaded",this.onLoaded),this.noFrame&&(this.frame=new o(0,0,t.width,t.height)),this.noFrame=!1,
this.width=this.frame.width,this.height=this.frame.height,this.scope.dispatchEvent({type:"update",content:this})},h.destroy=function(t){t&&this.baseTexture.destroy()},h.setFrame=function(t){if(this.frame=t,this.width=t.width,this.height=t.height,t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.updateFrame=!0,r.frameUpdates.push(this)},r.fromImage=function(t,e,i){var n=r.cache[t];return n||(n=new r(s.fromImage(t,e,i)),r.cache[t]=n),n},r.fromFrame=function(t){var e=r.cache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return e},r.fromCanvas=function(t,e){var i=new s(t,e);return new r(i)},r.addTextureToCache=function(t,e){r.cache[e]=t},r.removeTextureFromCache=function(t){var e=r.cache[t];return r.cache[t]=null,e},r.cache={},r.frameUpdates=[],r.SCALE_MODE=s.SCALE_MODE,e.exports=r},{"../events/EventTarget":17,"../geom/Point":42,"../geom/Rectangle":44,"./BaseTexture":69}],72:[function(t,e,i){"use strict";function r(t,e,i,r,s,n,o,a){var h=o-i,l=a-r,u=s-i,c=n-r,f=t-i,d=e-r,p=h*h+l*l,v=h*u+l*c,g=h*f+l*d,m=u*u+c*c,x=u*f+c*d,b=1/(p*m-v*v),y=(m*g-v*x)*b,_=(p*x-v*g)*b;return y>=0&&_>=0&&1>y+_}function s(t,e,i,r,s,n,o){return(e-r)*(s-i)+(i-t)*(n-r)>=0===o}var n=t("../platform");i.triangulate=function(t){var e=!0,i=t.length>>1;if(3>i)return[];for(var o=[],a=[],h=0;i>h;h++)a.push(h);h=0;for(var l=i;l>3;){var u=a[(h+0)%l],c=a[(h+1)%l],f=a[(h+2)%l],d=t[2*u],p=t[2*u+1],v=t[2*c],g=t[2*c+1],m=t[2*f],x=t[2*f+1],b=!1;if(s(d,p,v,g,m,x,e)){b=!0;for(var y=0;l>y;y++){var _=a[y];if(_!==u&&_!==c&&_!==f&&r(t[2*_],t[2*_+1],d,p,v,g,m,x)){b=!1;break}}}if(b)o.push(u,c,f),a.splice((h+1)%l,1),l--,h=0;else if(h++>3*l){if(!e)return n.console.warn("PIXI Warning: shape too complex to fill"),[];for(o=[],a=[],h=0;i>h;h++)a.push(h);h=0,l=i,e=!1}}return o.push(a[0],a[1],a[2]),o}},{"../platform":53}],73:[function(t,e,i){"use strict";var r=t("../platform"),s=t("../renderers/canvas/CanvasRenderer"),n=t("../renderers/webgl/WebGLRenderer");e.exports=function(t,e,i,o,a){t||(t=800),e||(e=600);var h=function(){try{var t=r.createCanvas();return!!r.window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(e){return!1}}();if(h&&r.navigator){var l=-1!==r.navigator.userAgent.toLowerCase().indexOf("trident");h=!l}return h?new n(t,e,i,o,a):new s(t,e,i,o)}},{"../platform":53,"../renderers/canvas/CanvasRenderer":55,"../renderers/webgl/WebGLRenderer":63}],74:[function(t,e,i){"use strict";i.hex2rgb=function(t){return[(t>>16&255)/255,(t>>8&255)/255,(255&t)/255]}},{}],75:[function(t,e,i){"use strict";function r(t){var e=n.console;e.groupCollapsed?e.groupCollapsed(t):e.group?e.group(t):e.log(t+" >>>>>>>>>")}function s(t){var e=n.console;e.groupEnd?e.groupEnd(t):e.log(t+" _________")}var n=t("../platform");i.runList=function(t,e){var i=0,o=t.first;for(e="pixi.runList"+(e?"("+e+")":""),r(e),n.console.log(o);o._iNext;)if(i++,o=o._iNext,n.console.log(o),i>100){n.console.log("BREAK");break}s(e)}},{"../platform":53}],76:[function(t,e,i){"use strict";var r=e.exports={};r.BoneData=function(t,e){this.name=t,this.parent=e},r.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1},r.SlotData=function(t,e){this.name=t,this.boneData=e},r.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null},r.Bone=function(t,e){this.data=t,this.parent=e,this.setToSetupPose()},r.Bone.yDown=!1,r.Bone.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,updateWorldTransform:function(t,e){var i=this.parent;null!=i?(this.worldX=this.x*i.m00+this.y*i.m01+i.worldX,this.worldY=this.x*i.m10+this.y*i.m11+i.worldY,this.worldScaleX=i.worldScaleX*this.scaleX,this.worldScaleY=i.worldScaleY*this.scaleY,this.worldRotation=i.worldRotation+this.rotation):(this.worldX=this.x,this.worldY=this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotation);var s=this.worldRotation*Math.PI/180,n=Math.cos(s),o=Math.sin(s);this.m00=n*this.worldScaleX,this.m10=o*this.worldScaleX,this.m01=-o*this.worldScaleY,this.m11=n*this.worldScaleY,t&&(this.m00=-this.m00,this.m01=-this.m01),e&&(this.m10=-this.m10,this.m11=-this.m11),r.Bone.yDown&&(this.m10=-this.m10,this.m11=-this.m11)},setToSetupPose:function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY}},r.Slot=function(t,e,i){this.data=t,this.skeleton=e,this.bone=i,this.setToSetupPose()},r.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,setAttachment:function(t){this.attachment=t,this._attachmentTime=this.skeleton.time},setAttachmentTime:function(t){this._attachmentTime=this.skeleton.time-t},getAttachmentTime:function(){return this.skeleton.time-this._attachmentTime},setToSetupPose:function(){var t=this.data;this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a;for(var e=this.skeleton.data.slots,i=0,r=e.length;r>i;i++)if(e[i]==t){this.setAttachment(t.attachmentName?this.skeleton.getAttachmentBySlotIndex(i,t.attachmentName):null);break}}},r.Skin=function(t){this.name=t,this.attachments={}},r.Skin.prototype={addAttachment:function(t,e,i){this.attachments[t+":"+e]=i},getAttachment:function(t,e){return this.attachments[t+":"+e]},_attachAll:function(t,e){for(var i in e.attachments){var r=i.indexOf(":"),s=parseInt(i.substring(0,r),10),n=i.substring(r+1),o=t.slots[s];if(o.attachment&&o.attachment.name==n){var a=this.getAttachment(s,n);a&&o.setAttachment(a)}}}},r.Animation=function(t,e,i){this.name=t,this.timelines=e,this.duration=i},r.Animation.prototype={apply:function(t,e,i){i&&this.duration&&(e%=this.duration);for(var r=this.timelines,s=0,n=r.length;n>s;s++)r[s].apply(t,e,1)},mix:function(t,e,i,r){i&&this.duration&&(e%=this.duration);for(var s=this.timelines,n=0,o=s.length;o>n;n++)s[n].apply(t,e,r)}},r.binarySearch=function(t,e,i){var r=0,s=Math.floor(t.length/i)-2;if(!s)return i;for(var n=s>>>1;;){if(t[(n+1)*i]<=e?r=n+1:s=n,r==s)return(r+1)*i;n=r+s>>>1}},r.linearSearch=function(t,e,i){for(var r=0,s=t.length-i;s>=r;r+=i)if(t[r]>e)return r;return-1},r.Curves=function(t){this.curves=[],this.curves.length=6*(t-1)},r.Curves.prototype={setLinear:function(t){this.curves[6*t]=0},setStepped:function(t){this.curves[6*t]=-1},setCurve:function(t,e,i,r,s){var n=.1,o=n*n,a=o*n,h=3*n,l=3*o,u=6*o,c=6*a,f=2*-e+r,d=2*-i+s,p=3*(e-r)+1,v=3*(i-s)+1,g=6*t,m=this.curves;m[g]=e*h+f*l+p*a,m[g+1]=i*h+d*l+v*a,m[g+2]=f*u+p*c,m[g+3]=d*u+v*c,m[g+4]=p*c,m[g+5]=v*c},getCurvePercent:function(t,e){e=0>e?0:e>1?1:e;var i=6*t,r=this.curves,s=r[i];if(!s)return e;if(-1==s)return 0;for(var n=r[i+1],o=r[i+2],a=r[i+3],h=r[i+4],l=r[i+5],u=s,c=n,f=8;;){if(u>=e){var d=u-s,p=c-n;return p+(c-p)*(e-d)/(u-d)}if(!f)break;f--,s+=o,n+=a,o+=h,a+=l,u+=s,c+=n}return c+(1-c)*(e-u)/(1-u)}},r.RotateTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=2*t},r.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,i){t*=2,this.frames[t]=e,this.frames[t+1]=i},apply:function(t,e,i){var s,n=this.frames;if(!(e<n[0])){var o=t.bones[this.boneIndex];if(e>=n[n.length-2]){for(s=o.data.rotation+n[n.length-1]-o.rotation;s>180;)s-=360;for(;-180>s;)s+=360;return void(o.rotation+=s*i)}var a=r.binarySearch(n,e,2),h=n[a-1],l=n[a],u=1-(e-l)/(n[a-2]-l);for(u=this.curves.getCurvePercent(a/2-1,u),s=n[a+1]-h;s>180;)s-=360;for(;-180>s;)s+=360;for(s=o.data.rotation+(h+s*u)-o.rotation;s>180;)s-=360;for(;-180>s;)s+=360;o.rotation+=s*i}}},r.TranslateTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=3*t},r.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,i,r){t*=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=r},apply:function(t,e,i){var s=this.frames;if(!(e<s[0])){var n=t.bones[this.boneIndex];if(e>=s[s.length-3])return n.x+=(n.data.x+s[s.length-2]-n.x)*i,void(n.y+=(n.data.y+s[s.length-1]-n.y)*i);var o=r.binarySearch(s,e,3),a=s[o-2],h=s[o-1],l=s[o],u=1-(e-l)/(s[o+-3]-l);u=this.curves.getCurvePercent(o/3-1,u),n.x+=(n.data.x+a+(s[o+1]-a)*u-n.x)*i,n.y+=(n.data.y+h+(s[o+2]-h)*u-n.y)*i}}},r.ScaleTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=3*t},r.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,i,r){t*=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=r},apply:function(t,e,i){var s=this.frames;if(!(e<s[0])){var n=t.bones[this.boneIndex];if(e>=s[s.length-3])return n.scaleX+=(n.data.scaleX-1+s[s.length-2]-n.scaleX)*i,void(n.scaleY+=(n.data.scaleY-1+s[s.length-1]-n.scaleY)*i);var o=r.binarySearch(s,e,3),a=s[o-2],h=s[o-1],l=s[o],u=1-(e-l)/(s[o+-3]-l);u=this.curves.getCurvePercent(o/3-1,u),n.scaleX+=(n.data.scaleX-1+a+(s[o+1]-a)*u-n.scaleX)*i,n.scaleY+=(n.data.scaleY-1+h+(s[o+2]-h)*u-n.scaleY)*i}}},r.ColorTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=5*t},r.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,i,r,s,n){t*=5,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=r,this.frames[t+3]=s,this.frames[t+4]=n},apply:function(t,e,i){var s=this.frames;if(!(e<s[0])){var n=t.slots[this.slotIndex];if(e>=s[s.length-5]){var o=s.length-1;return n.r=s[o-3],n.g=s[o-2],n.b=s[o-1],void(n.a=s[o])}var a=r.binarySearch(s,e,5),h=s[a-4],l=s[a-3],u=s[a-2],c=s[a-1],f=s[a],d=1-(e-f)/(s[a-5]-f);d=this.curves.getCurvePercent(a/5-1,d);var p=h+(s[a+1]-h)*d,v=l+(s[a+2]-l)*d,g=u+(s[a+3]-u)*d,m=c+(s[a+4]-c)*d;1>i?(n.r+=(p-n.r)*i,n.g+=(v-n.g)*i,n.b+=(g-n.b)*i,n.a+=(m-n.a)*i):(n.r=p,n.g=v,n.b=g,n.a=m)}}},r.AttachmentTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=t,this.attachmentNames=[],this.attachmentNames.length=t},r.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i},apply:function(t,e,i){var s=this.frames;if(!(e<s[0])){var n;n=e>=s[s.length-1]?s.length-1:r.binarySearch(s,e,1)-1;var o=this.attachmentNames[n];t.slots[this.slotIndex].setAttachment(o?t.getAttachmentBySlotIndex(this.slotIndex,o):null)}}},r.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.animations=[]},r.SkeletonData.prototype={defaultSkin:null,findBone:function(t){for(var e=this.bones,i=0,r=e.length;r>i;i++)if(e[i].name==t)return e[i];return null},findBoneIndex:function(t){for(var e=this.bones,i=0,r=e.length;r>i;i++)if(e[i].name==t)return i;return-1},findSlot:function(t){for(var e=this.slots,i=0,r=e.length;r>i;i++)if(e[i].name==t)return e[i];return null},findSlotIndex:function(t){for(var e=this.slots,i=0,r=e.length;r>i;i++)if(e[i].name==t)return i;return-1},findSkin:function(t){for(var e=this.skins,i=0,r=e.length;r>i;i++)if(e[i].name==t)return e[i];return null},findAnimation:function(t){for(var e=this.animations,i=0,r=e.length;r>i;i++)if(e[i].name==t)return e[i];return null}},r.Skeleton=function(t){this.data=t,this.bones=[];for(var e=0,i=t.bones.length;i>e;e++){var s=t.bones[e],n=s.parent?this.bones[t.bones.indexOf(s.parent)]:null;this.bones.push(new r.Bone(s,n))}for(this.slots=[],this.drawOrder=[],e=0,i=t.slots.length;i>e;e++){var o=t.slots[e],a=this.bones[t.bones.indexOf(o.boneData)],h=new r.Slot(o,this,a);this.slots.push(h),this.drawOrder.push(h)}},r.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateWorldTransform:function(){for(var t=this.flipX,e=this.flipY,i=this.bones,r=0,s=i.length;s>r;r++)i[r].updateWorldTransform(t,e)},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var t=this.bones,e=0,i=t.length;i>e;e++)t[e].setToSetupPose()},setSlotsToSetupPose:function(){for(var t=this.slots,e=0,i=t.length;i>e;e++)t[e].setToSetupPose(e)},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(t){for(var e=this.bones,i=0,r=e.length;r>i;i++)if(e[i].data.name==t)return e[i];return null},findBoneIndex:function(t){for(var e=this.bones,i=0,r=e.length;r>i;i++)if(e[i].data.name==t)return i;return-1},findSlot:function(t){for(var e=this.slots,i=0,r=e.length;r>i;i++)if(e[i].data.name==t)return e[i];return null},findSlotIndex:function(t){for(var e=this.slots,i=0,r=e.length;r>i;i++)if(e[i].data.name==t)return i;return-1},setSkinByName:function(t){var e=this.data.findSkin(t);if(!e)throw"Skin not found: "+t;this.setSkin(e)},setSkin:function(t){this.skin&&t&&t._attachAll(this,this.skin),this.skin=t},getAttachmentBySlotName:function(t,e){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(t),e)},getAttachmentBySlotIndex:function(t,e){if(this.skin){var i=this.skin.getAttachment(t,e);if(i)return i}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},setAttachment:function(t,e){for(var i=this.slots,r=0,s=i.size;s>r;r++){var n=i[r];if(n.data.name==t){var o=null;if(e&&(o=this.getAttachment(r,e),null==o))throw"Attachment not found: "+e+", for slot: "+t;return void n.setAttachment(o)}}throw"Slot not found: "+t},update:function(t){this.time+=t}},r.AttachmentType={region:0},r.RegionAttachment=function(){this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},r.RegionAttachment.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(t,e,i,r,s){var n=this.uvs;s?(n[2]=t,n[3]=r,n[4]=t,n[5]=e,n[6]=i,n[7]=e,n[0]=i,n[1]=r):(n[0]=t,n[1]=r,n[2]=t,n[3]=e,n[4]=i,n[5]=e,n[6]=i,n[7]=r)},updateOffset:function(){var t=this.width/this.regionOriginalWidth*this.scaleX,e=this.height/this.regionOriginalHeight*this.scaleY,i=-this.width/2*this.scaleX+this.regionOffsetX*t,r=-this.height/2*this.scaleY+this.regionOffsetY*e,s=i+this.regionWidth*t,n=r+this.regionHeight*e,o=this.rotation*Math.PI/180,a=Math.cos(o),h=Math.sin(o),l=i*a+this.x,u=i*h,c=r*a+this.y,f=r*h,d=s*a+this.x,p=s*h,v=n*a+this.y,g=n*h,m=this.offset;m[0]=l-f,m[1]=c+u,m[2]=l-g,m[3]=v+u,m[4]=d-g,m[5]=v+p,m[6]=d-f,m[7]=c+p},computeVertices:function(t,e,i,r){t+=i.worldX,e+=i.worldY;var s=i.m00,n=i.m01,o=i.m10,a=i.m11,h=this.offset;r[0]=h[0]*s+h[1]*n+t,r[1]=h[0]*o+h[1]*a+e,r[2]=h[2]*s+h[3]*n+t,r[3]=h[2]*o+h[3]*a+e,r[4]=h[4]*s+h[5]*n+t,r[5]=h[4]*o+h[5]*a+e,r[6]=h[6]*s+h[7]*n+t,r[7]=h[6]*o+h[7]*a+e}},r.AnimationStateData=function(t){this.skeletonData=t,this.animationToMixTime={}},r.AnimationStateData.prototype={defaultMix:0,setMixByName:function(t,e,i){var r=this.skeletonData.findAnimation(t);if(!r)throw"Animation not found: "+t;var s=this.skeletonData.findAnimation(e);if(!s)throw"Animation not found: "+e;this.setMix(r,s,i)},setMix:function(t,e,i){this.animationToMixTime[t.name+":"+e.name]=i},getMix:function(t,e){var i=this.animationToMixTime[t.name+":"+e.name];return i?i:this.defaultMix}},r.AnimationState=function(t){this.data=t,this.queue=[]},r.AnimationState.prototype={current:null,previous:null,currentTime:0,previousTime:0,currentLoop:!1,previousLoop:!1,mixTime:0,mixDuration:0,update:function(t){if(this.currentTime+=t,this.previousTime+=t,this.mixTime+=t,this.queue.length>0){var e=this.queue[0];this.currentTime>=e.delay&&(this._setAnimation(e.animation,e.loop),this.queue.shift())}},apply:function(t){if(this.current)if(this.previous){this.previous.apply(t,this.previousTime,this.previousLoop);var e=this.mixTime/this.mixDuration;e>=1&&(e=1,this.previous=null),this.current.mix(t,this.currentTime,this.currentLoop,e)}else this.current.apply(t,this.currentTime,this.currentLoop)},clearAnimation:function(){this.previous=null,this.current=null,this.queue.length=0},_setAnimation:function(t,e){this.previous=null,t&&this.current&&(this.mixDuration=this.data.getMix(this.current,t),this.mixDuration>0&&(this.mixTime=0,this.previous=this.current,this.previousTime=this.currentTime,this.previousLoop=this.currentLoop)),this.current=t,this.currentLoop=e,this.currentTime=0},setAnimationByName:function(t,e){var i=this.data.skeletonData.findAnimation(t);if(!i)throw"Animation not found: "+t;this.setAnimation(i,e)},setAnimation:function(t,e){this.queue.length=0,this._setAnimation(t,e)},addAnimationByName:function(t,e,i){var r=this.data.skeletonData.findAnimation(t);if(!r)throw"Animation not found: "+t;this.addAnimation(r,e,i)},addAnimation:function(t,e,i){var r={};if(r.animation=t,r.loop=e,!i||0>=i){var s=this.queue.length?this.queue[this.queue.length-1].animation:this.current;i=null!=s?s.duration-this.data.getMix(s,t)+(i||0):0}r.delay=i,this.queue.push(r)},isComplete:function(){return!this.current||this.currentTime>=this.current.duration}},r.SkeletonJson=function(t){this.attachmentLoader=t},r.SkeletonJson.prototype={scale:1,readSkeletonData:function(t){for(var e,i=new r.SkeletonData,s=t.bones,n=0,o=s.length;o>n;n++){var a=s[n],h=null;if(a.parent&&(h=i.findBone(a.parent),!h))throw"Parent bone not found: "+a.parent;e=new r.BoneData(a.name,h),e.length=(a.length||0)*this.scale,e.x=(a.x||0)*this.scale,e.y=(a.y||0)*this.scale,e.rotation=a.rotation||0,e.scaleX=a.scaleX||1,e.scaleY=a.scaleY||1,i.bones.push(e)}var l=t.slots;for(n=0,o=l.length;o>n;n++){var u=l[n];if(e=i.findBone(u.bone),!e)throw"Slot bone not found: "+u.bone;var c=new r.SlotData(u.name,e),f=u.color;f&&(c.r=r.SkeletonJson.toColor(f,0),c.g=r.SkeletonJson.toColor(f,1),c.b=r.SkeletonJson.toColor(f,2),c.a=r.SkeletonJson.toColor(f,3)),c.attachmentName=u.attachment,i.slots.push(c)}var d=t.skins;for(var p in d)if(d.hasOwnProperty(p)){var v=d[p],g=new r.Skin(p);for(var m in v)if(v.hasOwnProperty(m)){var x=i.findSlotIndex(m),b=v[m];for(var y in b)if(b.hasOwnProperty(y)){var _=this.readAttachment(g,y,b[y]);null!=_&&g.addAttachment(x,y,_)}}i.skins.push(g),"default"==g.name&&(i.defaultSkin=g)}var T=t.animations;for(var A in T)T.hasOwnProperty(A)&&this.readAnimation(A,T[A],i);return i},readAttachment:function(t,e,i){e=i.name||e;var s=r.AttachmentType[i.type||"region"];if(s==r.AttachmentType.region){var n=new r.RegionAttachment;return n.x=(i.x||0)*this.scale,n.y=(i.y||0)*this.scale,n.scaleX=i.scaleX||1,n.scaleY=i.scaleY||1,n.rotation=i.rotation||0,n.width=(i.width||32)*this.scale,n.height=(i.height||32)*this.scale,n.updateOffset(),n.rendererObject={},n.rendererObject.name=e,n.rendererObject.scale={},n.rendererObject.scale.x=n.scaleX,n.rendererObject.scale.y=n.scaleY,n.rendererObject.rotation=-n.rotation*Math.PI/180,n}throw"Unknown attachment type: "+s},readAnimation:function(t,e,i){var s,n,o,a,h,l,u,c=[],f=0,d=e.bones;for(var p in d)if(d.hasOwnProperty(p)){var v=i.findBoneIndex(p);if(-1==v)throw"Bone not found: "+p;var g=d[p];for(o in g)if(g.hasOwnProperty(o))if(h=g[o],"rotate"==o){for(n=new r.RotateTimeline(h.length),n.boneIndex=v,s=0,l=0,u=h.length;u>l;l++)a=h[l],n.setFrame(s,a.time,a.angle),r.SkeletonJson.readCurve(n,s,a),s++;c.push(n),f=Math.max(f,n.frames[2*n.getFrameCount()-2])}else{if("translate"!=o&&"scale"!=o)throw"Invalid timeline type for a bone: "+o+" ("+p+")";var m=1;for("scale"==o?n=new r.ScaleTimeline(h.length):(n=new r.TranslateTimeline(h.length),m=this.scale),n.boneIndex=v,s=0,l=0,u=h.length;u>l;l++){a=h[l];var x=(a.x||0)*m,b=(a.y||0)*m;n.setFrame(s,a.time,x,b),r.SkeletonJson.readCurve(n,s,a),s++}c.push(n),f=Math.max(f,n.frames[3*n.getFrameCount()-3])}}var y=e.slots;for(var _ in y)if(y.hasOwnProperty(_)){var T=y[_],A=i.findSlotIndex(_);for(o in T)if(T.hasOwnProperty(o))if(h=T[o],"color"==o){for(n=new r.ColorTimeline(h.length),n.slotIndex=A,s=0,l=0,u=h.length;u>l;l++){a=h[l];var w=a.color,E=r.SkeletonJson.toColor(w,0),S=r.SkeletonJson.toColor(w,1),C=r.SkeletonJson.toColor(w,2),R=r.SkeletonJson.toColor(w,3);n.setFrame(s,a.time,E,S,C,R),r.SkeletonJson.readCurve(n,s,a),s++}c.push(n),f=Math.max(f,n.frames[5*n.getFrameCount()-5])}else{if("attachment"!=o)throw"Invalid timeline type for a slot: "+o+" ("+_+")";for(n=new r.AttachmentTimeline(h.length),n.slotIndex=A,s=0,l=0,u=h.length;u>l;l++)a=h[l],n.setFrame(s++,a.time,a.name);c.push(n),f=Math.max(f,n.frames[n.getFrameCount()-1])}}i.animations.push(new r.Animation(t,c,f))}},r.SkeletonJson.readCurve=function(t,e,i){var r=i.curve;r&&("stepped"==r?t.curves.setStepped(e):r instanceof Array&&t.curves.setCurve(e,r[0],r[1],r[2],r[3]))},r.SkeletonJson.toColor=function(t,e){if(8!=t.length)throw"Color hexidecimal length must be 8, recieved: "+t;return parseInt(t.substring(2*e,2),16)/255},r.Atlas=function(t,e){this.textureLoader=e,this.pages=[],this.regions=[];var i=new r.AtlasReader(t),s=[];s.length=4;for(var n=null;;){var o=i.readLine();if(null==o)break;if(o=i.trim(o),o.length)if(n){var a=new r.AtlasRegion;a.name=o,a.page=n,a.rotate="true"==i.readValue(),i.readTuple(s);var h=parseInt(s[0],10),l=parseInt(s[1],10);i.readTuple(s);var u=parseInt(s[0],10),c=parseInt(s[1],10);a.u=h/n.width,a.v=l/n.height,a.rotate?(a.u2=(h+c)/n.width,a.v2=(l+u)/n.height):(a.u2=(h+u)/n.width,a.v2=(l+c)/n.height),a.x=h,a.y=l,a.width=Math.abs(u),a.height=Math.abs(c),4==i.readTuple(s)&&(a.splits=[parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10),parseInt(s[3],10)],4==i.readTuple(s)&&(a.pads=[parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10),parseInt(s[3],10)],i.readTuple(s))),a.originalWidth=parseInt(s[0],10),a.originalHeight=parseInt(s[1],10),i.readTuple(s),a.offsetX=parseInt(s[0],10),a.offsetY=parseInt(s[1],10),a.index=parseInt(i.readValue(),10),this.regions.push(a)}else{n=new r.AtlasPage,n.name=o,n.format=r.Atlas.Format[i.readValue()],i.readTuple(s),n.minFilter=r.Atlas.TextureFilter[s[0]],n.magFilter=r.Atlas.TextureFilter[s[1]];var f=i.readValue();n.uWrap=r.Atlas.TextureWrap.clampToEdge,n.vWrap=r.Atlas.TextureWrap.clampToEdge,"x"==f?n.uWrap=r.Atlas.TextureWrap.repeat:"y"==f?n.vWrap=r.Atlas.TextureWrap.repeat:"xy"==f&&(n.uWrap=n.vWrap=r.Atlas.TextureWrap.repeat),e.load(n,o),this.pages.push(n)}else n=null}},r.Atlas.prototype={findRegion:function(t){for(var e=this.regions,i=0,r=e.length;r>i;i++)if(e[i].name==t)return e[i];return null},dispose:function(){for(var t=this.pages,e=0,i=t.length;i>e;e++)this.textureLoader.unload(t[e].rendererObject)},updateUVs:function(t){for(var e=this.regions,i=0,r=e.length;r>i;i++){var s=e[i];s.page==t&&(s.u=s.x/t.width,s.v=s.y/t.height,s.rotate?(s.u2=(s.x+s.height)/t.width,s.v2=(s.y+s.width)/t.height):(s.u2=(s.x+s.width)/t.width,s.v2=(s.y+s.height)/t.height))}}},r.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},r.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},r.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},r.AtlasPage=function(){},r.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},r.AtlasRegion=function(){},r.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},r.AtlasReader=function(t){this.lines=t.split(/\r\n|\r|\n/)},r.AtlasReader.prototype={index:0,trim:function(t){return t.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw"Invalid line: "+t;return this.trim(t.substring(e+1))},readTuple:function(t){var e=this.readLine(),i=e.indexOf(":");if(-1==i)throw"Invalid line: "+e;for(var r=0,s=i+1;3>r;r++){var n=e.indexOf(",",s);if(-1==n){if(!r)throw"Invalid line: "+e;break}t[r]=this.trim(e.substr(s,n-s)),s=n+1}return t[r]=this.trim(e.substring(s)),r+1}},r.AtlasAttachmentLoader=function(t){this.atlas=t},r.AtlasAttachmentLoader.prototype={newAttachment:function(t,e,i){switch(e){case r.AttachmentType.region:var s=this.atlas.findRegion(i);if(!s)throw"Region not found in atlas: "+i+" ("+e+")";var n=new r.RegionAttachment(i);return n.rendererObject=s,n.setUVs(s.u,s.v,s.u2,s.v2,s.rotate),n.regionOffsetX=s.offsetX,n.regionOffsetY=s.offsetY,n.regionWidth=s.width,n.regionHeight=s.height,n.regionOriginalWidth=s.originalWidth,n.regionOriginalHeight=s.originalHeight,n}throw"Unknown attachment type: "+e}},r.Bone.yDown=!0},{}]},{},[7]);
//# sourceMappingURL=main.js.map